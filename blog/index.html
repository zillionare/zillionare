


    



    
        
    














<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="量化软件 量化策略 量化课程 邢不行 CQF 大富翁 backtrader zipline CTA AI B圈 Python量化 聚宽 数字货币 金融大数据及量化分析">
      
      
      
        <link rel="canonical" href="http://www.jieyu.ai/blog/">
      
      
        <link rel="prev" href="../articles/python/visualize/qq-plot/">
      
      
        <link rel="next" href="category/figures/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS 订阅" href="../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="已更新内容的 RSS 订阅" href="../feed_rss_updated.xml">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.25">
    
    
    <title>Blog - 大富翁量化</title>

    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../overrides/stylesheets/extra.css">
    
      <link rel="stylesheet" href="../overrides/stylesheets/katex.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-EHVH3XCS1V"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-EHVH3XCS1V",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-EHVH3XCS1V",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
    
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Blog - 大富翁量化" />
    <meta property="og:description" content=" - 量化软件 量化策略 量化课程 邢不行 CQF 大富翁 backtrader zipline CTA AI B圈 Python量化 聚宽 数字货币 金融大数据及量化分析" />
    <meta property="og:url" content="http://www.jieyu.ai/blog/" />
    <meta property="og:image" content="http://www.jieyu.ai/assets/banner.jpg" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Blog - 大富翁量化" />
    <meta name="twitter:description" content=" - 量化软件 量化策略 量化课程 邢不行 CQF 大富翁 backtrader zipline CTA AI B圈 Python量化 聚宽 数字货币 金融大数据及量化分析" />
    <meta name="twitter:image" content="http://www.jieyu.ai/assets/banner.jpg" />

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href=".." title="大富翁量化" class="md-header__button md-logo" aria-label="大富翁量化" data-md-component="logo">
      
  <img src="../assets/img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            大富翁量化
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zillionare/zillionare" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    zillionare
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="/" class="md-tabs__link">
        
  
    
  
  最新文章

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../articles/coursea/24lectures/intro/" class="md-tabs__link">
          
  
    
  
  量化课程

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../articles/products/" class="md-tabs__link">
          
  
    
  
  量化产品

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../articles/investment/%E7%AD%96%E7%95%A5%E7%A0%94%E7%A9%B6/capm/" class="md-tabs__link">
          
  
    
  
  策略研究

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../articles/python/best-practice-python/chap01/" class="md-tabs__link">
          
  
    
  
  学Python

        </a>
      </li>
    
  

    
  

    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../tags" class="md-tabs__link">
        
  
    
  
  文章分类

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../contact/" class="md-tabs__link">
          
  
    
  
  Follow Us

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../free-resources/" class="md-tabs__link">
        
  
    
  
  Free resources

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
    
    
        
    

    <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
        <div class="md-sidebar__scrollwrap">
            <div class="md-sidebar__inner">
                


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="大富翁量化" class="md-nav__button md-logo" aria-label="大富翁量化" data-md-component="logo">
      
  <img src="../assets/img/logo.png" alt="logo">

    </a>
    大富翁量化
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zillionare/zillionare" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    zillionare
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    最新文章
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    量化课程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            量化课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    量化二十四课
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            量化二十四课
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/coursea/24lectures/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    课程简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/coursea/24lectures/syllabus.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    课程大纲
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/coursea/24lectures/faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常见问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/coursea/24lectures/detail/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    二十四课内容详情
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/coursea/24lectures/preview.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    课程预览
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    量化中的Numpy和Pandas
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            量化中的Numpy和Pandas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/coursea/numpy-pandas/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/coursea/numpy-pandas/syllabus.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    课程大纲
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    量化产品
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            量化产品
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../articles/products/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    产品系列
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            产品系列
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/products/zillionare_installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    大富翁安装指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/products/zillionare-maintain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    大富翁数据维护
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/products/zillionare-troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常见问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/products/gm-adaptor-installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实盘交易接口
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    策略研究
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            策略研究
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    量化知识
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            量化知识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1_1" id="__nav_4_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    策略研究
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            策略研究
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E7%AD%96%E7%95%A5%E7%A0%94%E7%A9%B6/capm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    资本资产定价模型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E7%AD%96%E7%95%A5%E7%A0%94%E7%A9%B6/mpt-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    投资组合理论与实战(1) - 基本概念
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E7%AD%96%E7%95%A5%E7%A0%94%E7%A9%B6/mpt-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    投资组合理论与实战(2) - 蒙特卡洛方法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E7%AD%96%E7%95%A5%E7%A0%94%E7%A9%B6/mpt-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    投资组合理论与实战(3) - 优化算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E7%AD%96%E7%95%A5%E7%A0%94%E7%A9%B6/mpt-4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    投资组合理论与实战(4) - PyportfolioOpt工具库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E7%AD%96%E7%95%A5%E7%A0%94%E7%A9%B6/%E5%85%B3%E4%BA%8E%E5%AF%BB%E6%89%BE%E9%A1%B6%E5%92%8C%E5%BA%95%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于寻找顶和底的一些研究
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_1_2" id="__nav_4_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    量化库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2">
            <span class="md-nav__icon md-icon"></span>
            量化库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E9%87%8F%E5%8C%96%E5%BA%93/%E5%AE%9E%E7%9B%98%E6%8E%A5%E5%85%A5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    量化实盘接入方式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E9%87%8F%E5%8C%96%E5%BA%93/%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96/%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    量化数据的持久化方案
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_3" >
        
          
          <label class="md-nav__link" for="__nav_4_1_3" id="__nav_4_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    量化杂谈
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_3">
            <span class="md-nav__icon md-icon"></span>
            量化杂谈
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E9%87%8F%E5%8C%96%E6%9D%82%E8%B0%88/tulipmania/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    花开曾倾国
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E9%87%8F%E5%8C%96%E6%9D%82%E8%B0%88/voc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    东印度公司
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/investment/%E9%87%8F%E5%8C%96%E6%9D%82%E8%B0%88/%E8%B5%B7%E5%BA%95%E7%99%BE%E4%BA%BF%E7%A7%81%E5%8B%9F%E5%88%9B%E5%A7%8B%E4%BA%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    找校友！起底百亿私募创始人
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    学Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            学Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1_1" id="__nav_5_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    专题
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_1">
            <span class="md-nav__icon md-icon"></span>
            专题
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1_1_1" id="__nav_5_1_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python能做大项目
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_1_1">
            <span class="md-nav__icon md-icon"></span>
            Python能做大项目
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01 为什么要学 Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02 编程开发环境
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03 构建 Python 虚拟环境
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    04 项目布局和项目生成向导
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    05 Poetry: 项目管理的诗和远方
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    06 10 倍速！高效编码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap07/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    07 代码单元测试
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap08/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    08 代码版本管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap09/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    09 持续集成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10 撰写技术文档
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/best-practice-python/chap11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11 发布应用
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_2" >
        
          
          <label class="md-nav__link" for="__nav_5_1_2" id="__nav_5_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数据分析与可视化
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_2">
            <span class="md-nav__icon md-icon"></span>
            数据分析与可视化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/visualize/dash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dash-用Python也能做网页
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/visualize/how-to-scale/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    量化策略中如何进行缩放和归一化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/visualize/matplotlib-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    matplotlib的布局问题（1）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/visualize/matplotlib-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    matplotlib的布局问题（2）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../articles/python/visualize/qq-plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    为什么Q-Q图可用来进行统计推断
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tags" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文章分类
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Follow Us
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Follow Us
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Follow Us
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../free-resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Free resources
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>

                
                
                <br/>
                
            </div>
        </div>
    </div>



    
        
    

    <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
        <div class="md-sidebar__scrollwrap">
            <div class="md-sidebar__inner">
                
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
</nav>
                

                
                
                    <div class="tag-cloud-toc">
                        





  

  

  

  
    
    
      
        
      
    
  

  
    
    
      
        
        
        
        
          
          
            
            
            
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
            
            
            
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
            
            
            
          
        
        
        
      
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
    
      
        
        
        
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  

  

  

  

  

  

  

  

  

  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
  

  
    
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
            
            
            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
      
    
      
        
        
        
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
        
        
          
        
      
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  


<style>
    .tag-cloud {
        margin-top:1em;
        margin-bottom: 0.5em;
    }
    .tag-cloud-content {
        padding: 0 0.6rem;
        
    }
</style>

<p class="md-nav tag-cloud">
  <label class="md-nav__title">Tag cloud</label>
</p>
<div class="tag-cloud-content">
    
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#课程">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.7rem;
                    
                    color:DarkOrchid;
                ">课程&nbsp;
                </span>
                <!--<sup class="tag-count">4</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#story">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGoldenrod;
                ">story&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#量化传奇">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkBlue;
                ">量化传奇&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#Python">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGoldenrod;
                ">Python&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#Poetry">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkCyan;
                ">Poetry&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#ppw">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGoldenrod;
                ">ppw&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#statistics">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkBlue;
                ">statistics&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#CDF">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkSlateBlue;
                ">CDF&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#KS-Test">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkTurquoise;
                ">KS-Test&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#algorithms">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkMagenta;
                ">algorithms&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#machine learning">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkMagenta;
                ">machine learning&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#strategy">
                <span class="tag-name" style="
                    
                        
                            
                        
                    
                        font-size:1.0rem;
                    
                    color:DarkBlue;
                ">strategy&nbsp;
                </span>
                <!--<sup class="tag-count">18</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#python">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.9rem;
                    
                    color:DarkGreen;
                ">python&nbsp;
                </span>
                <!--<sup class="tag-count">8</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#sklearn">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkMagenta;
                ">sklearn&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#算法">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkTurquoise;
                ">算法&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#book">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkMagenta;
                ">book&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#books">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkBlue;
                ">books&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#quant">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.65rem;
                    
                    color:DarkOrchid;
                ">quant&nbsp;
                </span>
                <!--<sup class="tag-count">3</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#Figures">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkRed;
                ">Figures&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#Behavioral Economics">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkSlateGray;
                ">Behavioral Economics&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#人物">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.7rem;
                    
                    color:DarkTurquoise;
                ">人物&nbsp;
                </span>
                <!--<sup class="tag-count">4</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#职场">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGreen;
                ">职场&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#Quantopian">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkBlue;
                ">Quantopian&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#investing">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkRed;
                ">investing&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#algorithm">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.6rem;
                    
                    color:DarkSlateBlue;
                ">algorithm&nbsp;
                </span>
                <!--<sup class="tag-count">2</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#quantlib">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.8rem;
                    
                    color:DarkViolet;
                ">quantlib&nbsp;
                </span>
                <!--<sup class="tag-count">6</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#jupyter-notebook">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkSlateBlue;
                ">jupyter-notebook&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#qmt">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkOliveGreen;
                ">qmt&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#xtquant">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.7rem;
                    
                    color:DarkSlateGray;
                ">xtquant&nbsp;
                </span>
                <!--<sup class="tag-count">4</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#blog">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkViolet;
                ">blog&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#static-site">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGoldenrod;
                ">static-site&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#tools">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.8rem;
                    
                    color:DarkGreen;
                ">tools&nbsp;
                </span>
                <!--<sup class="tag-count">6</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#pandas">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkViolet;
                ">pandas&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#duckdb">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkRed;
                ">duckdb&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#量化数据存储">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.65rem;
                    
                    color:DarkTurquoise;
                ">量化数据存储&nbsp;
                </span>
                <!--<sup class="tag-count">3</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#hdf5">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkViolet;
                ">hdf5&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#h5py">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGreen;
                ">h5py&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#pyarrow">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGoldenrod;
                ">pyarrow&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#parquet">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkTurquoise;
                ">parquet&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#数据源">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkTurquoise;
                ">数据源&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#clickhouse">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkCyan;
                ">clickhouse&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#rsi">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkOrchid;
                ">rsi&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#zigzag">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkTurquoise;
                ">zigzag&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#穹顶压力">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGreen;
                ">穹顶压力&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#因子">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.8rem;
                    
                    color:DarkGreen;
                ">因子&nbsp;
                </span>
                <!--<sup class="tag-count">6</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#技术指标">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.6rem;
                    
                    color:DarkGoldenrod;
                ">技术指标&nbsp;
                </span>
                <!--<sup class="tag-count">2</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#pearson">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkRed;
                ">pearson&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#spearman">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGoldenrod;
                ">spearman&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#factor">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.7rem;
                    
                    color:DarkRed;
                ">factor&nbsp;
                </span>
                <!--<sup class="tag-count">4</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#因子分析">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.7rem;
                    
                    color:DarkRed;
                ">因子分析&nbsp;
                </span>
                <!--<sup class="tag-count">4</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#Alphalens">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.7rem;
                    
                    color:DarkViolet;
                ">Alphalens&nbsp;
                </span>
                <!--<sup class="tag-count">4</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#涨停板">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkCyan;
                ">涨停板&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#机器学习">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGreen;
                ">机器学习&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#xgboost">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkRed;
                ">xgboost&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#review">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkSlateGray;
                ">review&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#zscore">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkSlateBlue;
                ">zscore&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#波动率">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkCyan;
                ">波动率&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#顶背离">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkRed;
                ">顶背离&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#copilot">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGreen;
                ">copilot&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#vscode">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkGoldenrod;
                ">vscode&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#Jupyter">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.6rem;
                    
                    color:DarkGreen;
                ">Jupyter&nbsp;
                </span>
                <!--<sup class="tag-count">2</sup>-->
            </a>
        
            
            
            
            <a class="tag" href="http://www.jieyu.ai/tags/#notebook">
                <span class="tag-name" style="
                    
                        
                    
                        font-size:0.55rem;
                    
                    color:DarkSlateGray;
                ">notebook&nbsp;
                </span>
                <!--<sup class="tag-count">1</sup>-->
            </a>
        
    
</div>
                    </div>
                
                <br/>
                
            </div>
        </div>
    </div>


          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-06-10 00:00:00">2024年6月10日</time></li>
        
          <li class="md-meta__item">
            分类于
            
              <a href="category/%E4%BA%BA%E7%89%A9/" class="md-meta__link">人物</a></li>
        
        
          
          <li class="md-meta__item">
            
              需要 2 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="sqlpython"><a class="toclink" href="2024/06/10/the-most-important-coding-language-in-fintech/">高薪金领都用啥编程语言？SQL、Python领航，附排名！</a></h2>
<p>最近两天，收到私信咨询，想进入量化领域难吗？</p>
<p>提问者没有介绍任何自己的背景，也没有明确说明具体要从事什么岗位。因此这是一个无法回答的问题。不过，我会持续跟进这个问题，并给出一些参考资料。</p>
<p>今日焦点：金融界最需要什么样的编程技能。数据来源于Revelio Labs和eFinacialCareers。前者是人力情报数据分析公司，后者是金融专业求职平台。</p>
<hr />
<p>根据Revelio Labs 的数据，在金融服务业最受欢迎的编程语言前十排名如下：</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/06/coding-language-in-finance.png" /></p>
<p>你可能想不到，SQL在金融领域有着王者般的地位。在整个科技领域，SQL与岗位的相关性只占18%，但在金融招聘领域中，却有25%左右的岗位要求掌握SQL。</p>
<p>当然，也有许多人并不把SQL视为编程语言。老实说，SQL只能视为一种数据库查询语言，我们无法用它来完成数据查询之外的工作。</p>
<p>因此，Python才是真正意义上的王者，不仅仅是在金融领域，根据TIOBE 6月的排名，它仍然位居榜首，并且受欢迎程度在上升中。</p>
<hr />
<p><img alt="" src="https://images.jieyu.ai/images/2024/06/tiobe-ranking-2024-6.png" /></p>
<p>但是，金融行业对C++和Rust这样的互联网热门编程语言的需求并不大，尽管这两种语言在高频交易中不可或缺，但毕竟高频交易比较小众、无法吸纳大资金，因此行业的重心不会在这里。</p>
<p>越是低频交易，越能吸纳大量资金。因此，像Python这样尽管性能不佳，但开发快速灵活的语言，在金融界被广泛使用。此外，SQL的大量使用，也证明了金融业对大数据处理能力的要求并不高，大量的数据处理场景仍然可以使用SQL来实现。这也是完全可以理解的，因为在中低频交易广泛使用的财务数据，数据量并不大。</p>
<p>Java位列三甲也是意料之中。大量的事务系统，包括公司网站仍然会使用Java来开发。</p>
<hr />
<p>Javascript能上榜，很可能也是因为这样的用途。投资公司为了保持神秘和高科技形象，他们的网页也常常做的比较酷炫。比如Millennium（千禧年）的官网上，就常常使用Javascript炫技。在他们最新的主页上，展示了js制作的磁力线效果和各种reveal特效。</p>
<div style='width:"75%";text-align:center;margin-bottom:1rem'>
<img src='https://images.jieyu.ai/images/2024/06/millennium.png'>
<span style='font-style:italic;font-size:0.8rem'>千禧官网</span>
</div>

<p>这界面丑是丑了点。但理工男的形象是立住了。所以，前端做得好，也是有机会进金融行业的。</p>
<p>R排在第4名也不意外。R语言在数据科学领域被广泛使用，R语言天然有很多统计方案的模块，它的语法简单，支持管道操作，对于临时性的数据分析处理非常友好。SAS上榜的原因也是一样。SAS与R对因子分析都天然支持得很好。统计模块及因子分析，都是金融行业数据分析的基础。</p>
<hr />
<p>比较令人意外的是VBA。实际上VBA上榜，蕴含了在金融行业必须熟练掌握Excel的意味。所谓熟练掌握Excel，决不是仅仅是指掌握了它基于图形界面的功能，而是要求在关键时刻、复杂功能及快速处理大量数据时，能够使用VBA来编写脚本。</p>
<p>具有强大的编程能力，对于金融领域求职有多重要？我们看一下eFinancial Careers最近发布的一个全球信贷和可转换债券主管岗位，这是一个年薪$50万到$80万之间的工作：</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>A renowned investment firm is looking for an Head of global credit and convertible bonds to report to their CIO function ...</p>
<p>Experience</p>
<ul>
<li>Fixed income in preferably a sell-side company</li>
<li>Front-office</li>
<li>Experience with arbitrage</li>
<li>Experience with credit, equities, convertibles, CDS</li>
<li><strong>Strong programming skills (Python or R, SQL, Excel or VB)</strong></li>
<li>Strong communication skills and ability to work in a team</li>
</ul>
</div>
<hr />
<p>如果你是一名在校生，可能多少掌握一点SQL和Python，但究竟要达到什么样的程度才算精通呢？</p>
<p>关于Python，在工程技巧方面可以参考我的新书《Python高效编程实战指南》（预定7月开售），算法方面可以多刷leetcode、kaggle的题，或者简街、千禧的puzzle专栏，我们的专栏也不时会有一些性能优化的技巧。</p>
<p><img alt="50%" src="https://images.jieyu.ai/images/hot/book-cover-with-bridge.jpg" /></p>
<p>关于SQL，如果是开发岗，需要了解数据分区规划、索引优化、SQL优化等，如果是数据分析岗，则只需要了解如何构建复杂的查询即可。这些查询主要是窗口函数应用、子查询与自连接、复杂条件筛选与分组等。</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-06-01 00:00:00">2024年6月1日</time></li>
        
          <li class="md-meta__item">
            分类于
            
              <a href="category/%E4%BA%BA%E7%89%A9/" class="md-meta__link">人物</a></li>
        
        
          
          <li class="md-meta__item">
            
              需要 3 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="fawce-quantopian"><a class="toclink" href="2024/06/01/john-fawcett-with-quantopian/">反抗者的崛起！Fawce 和 Quantopian 的量化之路</a></h2>
<p>2008 年的金融危机后，华尔街开始围绕人工智能、算法策略和海量数据构建美丽新世界。掌握编程和算法的大拿是这个新世界的宠儿。也有一批反叛者，他们拒绝华尔街的征召：宁愿穿着睡衣在书房里工作，也不愿在豪华大楼的格子间正襟危坐。</p>
<p>Quantopian 正是这一群人的领袖。John Fawcett（昵称 Fawce）则是这家公司的头儿。</p>
<p>对量化萌新来说，John Fawcett 的名字略显生疏。这篇文章，我们将起底 John Fawcett，了解他从四大天坑专业成功转型量化金融的历程，并和他一起，追问量化事业的意义。</p>
<p>Fawcett 出生于一个普通的家庭。他的父母在退休之前，基本上都要同时打 3~4 份工来维持生计。尽管如此，他的父母坚持把子女的教育放在第一位，供他上了哈佛。他还有一个哥哥，后来选择了教育事业，成为了一名中学校长。这样的出身和家庭背景，对他的理念形成产生了重要的影响。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/06/john-fawcett.avif" /></p>
<p>Fawcett 本科毕业于哈佛，专业是四大天坑之一的材料学。在千禧年前后的.com 泡沫白热化期间，他爱上了编程，于是搬到旧金山，为 Scient（一家软件咨询公司）工作。在这里，他管理美国职业棒球联盟的视频编码项目。</p>
<p><img alt="L50" src="https://images.jieyu.ai/images/2024/06/john-fawcett-2.png" /></p>
<p>John Fawcett 的量化之路起源于爱情的指引。他在 Scient 的事业很顺利，但他的女朋友在波士顿上医学院，于是，他又回到了东部，并在一家对冲基金找到了一份分析师的工作。Fawcett 发现这时的自己还并不擅长资产管理，他的工作是为投资经理编写软件，使得信息的收集和分析得以自动化。</p>
<p>很快，Fawcett 就离开了这家公司，并且创建了 Tamale Software。这家公司开发了用于基本面分析的软件。客户是对冲基金和资产管理公司。Fawcett 很快就取得了成功，2008 年，他把公司以 7000 万美元的对价，卖给了 Advent，这是一家位于旧金山的为投资者提供软件和服务的公司。Fawcett 继续为 Tamale 工作了一段时间，在这期间，Advent 强大的销售队伍，给 Tamale 带来了新的资源，比如新加坡主权基金、来自挪威和美国各地的基金经理成为他的客户。</p>
<p>在这段期间，他还接触了大量的在物理学、计算化学、信号处理领域的博士，对他们在市场方面独特的看法所吸引：即通过下钻到海量数据，建立模型来挖掘未发现的投资机会。</p>
<p>同时，他也了解到，即使这些人有很强的编程和算法能力，也对量化交易非常感兴趣，但由于之前没有投资经验，他们不得不被挡在传统的金融机构门外。</p>
<p>Fawcett 决心改变这种状态，给金融袪魅，实现量化投资过程的平民化，要为业余交易者--包括从来自康奈尔大学的计算机学生，到为互联网公司工作的高级数据科学家，再到机械工程师--为他们提供进入量化领域的机会，这是 Fawcett 曾经幸运地拥有、但不是所有人都能得到的机会。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/06/quantopian.png" /></p>
<p>要有光。</p>
<p>于是，他构建了 Quantopian。在 Quantopian，他们为社区提供海量数据和量化工具、甚至是昂贵的回测平台（指运行时所需的计算资源）。任何人都能免费加入这个社区，通过 Python 和 Notebook 构建自己的投资策略，并进行纸面上的投资。</p>
<p>一旦某人的策略在 6 个月的实时模拟交易中胜出，他就将获得一笔 10 万美元的基金管理权，正式开始实盘交易。如果继续成功，他将获得平台提供的高达 5000 万美元的支持。社区的另一职能则是为未来宽客提供教育资源。</p>
<p>Quantopian 的想法迅速吸引了大量的宽客：航空航天工程师、消费品公司的增长分析师、数据科学家、系统工程师、黑客、和博士生。在高峰时期，Quantopian 聚集了 12 万名会员，并且得到了像 Point 72 这样的投资巨头的认可，从他们那儿得到了 2.5 亿美金的资管规模。不仅如此，Quantopian 的商业模式不仅在美国、甚至在全球都被模仿，被福布斯评为美国最有前途的公司之一。</p>
<p>但是，也许是 Quantopian 的名字带着某种宿命式的悲剧色彩，也许是 Quantopian 的运营模式并不完美 -- 实时数据和回测引擎的运营费用真的得很贵，但Quantopian并不能从这些资源中得到多少回馈。尽管 Fawce 承诺要为所有人提供一个实现他们梦想的机会，但 Quantopian 自己最终却活在了梦想的光环之外。在运营 9 年之后，2020 年 11 月 14 日终止了运营。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Quantopian 的名字来源于 Quant 和 Utopia（乌托邦）。这表明，Fawce 在创建 Quantopian 之初，就带着某种改变量化交易的理想。但这个名字，也无疑一开始就暗含了某种悲剧色彩。</p>
</div>
<p>在 Quantopian 终止运营之后，许多用户猛然发现，自己在社区中留下了大量的 Notebook、想法、互动和回忆。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/06/quantopian-shutdown.png" /></p>
<p>一位用户写道，“我一生中从未见过有这么多聪明人愿意与我分享如此多的信息而不求任何回报。我现在并将永远感激你们为我所做的一切”。</p>
<p>另一位用户则说，“在 2016 年加入后的几个月内，我学会了 Python，编写了所有基于 Excel 的策略，参加并赢得了第 22 场比赛，并且开始在 IB 进行实时交易。之前的我没有相关学位和任何经验，但现在我正在面试纽约的大项基金。Q 改变了我的生活。”</p>
<p>Quantopian 的失败，只是商业上的失败。在实现金融平民化的愿景上，Quantopian 已经取得了很大的成功。今天，Quantopian 开发并开源的量化工具，无论是 zipline, 还是 pyfolio 或者 Alphalens 等等，都已经成为某种事实上的标准。</p>
<p>如果没有这些软件，很难想像，一个业余的量化人、或者规模较小的机构该如何起步：传统的金融人并不太熟悉编程、而纯粹的计算机专业人士则不太理解金融理论。Quantopian 把因子检验、资产组合管理、回测等量化必备的方法，以接近开箱即用的方式，教给所有人。</p>
<p>Quantopian提供的教育资源和平台更是帮助了许多人成功转型。</p>
<p><img alt="L50" src="https://images.jieyu.ai/images/2024/06/saeed.png" /></p>
<p>在Quantopian的网站上，Fawcett分享了赛义德·拉赫曼的转型故事。赛义德出生在一个股市受到污名化，股市经常与赌博联系在一起的国家。他在本科期间接受了时间序列分析和数据科学的训练，并通过互联网攻读了 CFA 1 级。进一步深造在他的国家是不可能的，但去美国学习是一个对他难以抉择的重大决定，更不用说由于缺乏奖学金带来的财务障碍（在美国读金融真是太贵了！）。幸运地是，在他读研究生期间，发现了 Quantopian。对于赛义德来说，这个平台不仅仅是一个工具，更是知识和机会的灯塔。正是在这里，赛义德不仅磨练了自己的技能，还找到了灵感和社区。</p>
<p>赛义德在一次分享中，具体地谈到了社区的经验贴与教科书的重大不同：</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>Max Margenot from your team once in his webinars went through OU (Ornstein–Uhlenbeck process - a stochastic differential equation that's used in understanding mean-reverting process), those were things that one normally finds in textbooks or expensive programs like CQF, but here Max was explaining it using Python, and as a student trying to wrap my head around the practical applications of these complex topics, the content your team released was just pure gold.
大意：奥恩斯坦-乌伦贝克随机过程在教科书和CQF这样昂贵的课程中，都只介绍了理论，但Max Margenot在webinar中分享了如何通过Python来实现这样复杂深奥的模型，这些内容弥足珍贵。</p>
</div>
<p>滋养了赛义德的，不仅仅来自Quantopian的教育资源。2017 年和 2018 年的 QuantCon 更是成为他的重要舞台，为他打开了社交、学习和曝光的大门。</p>
<p>在 2017 年的演讲上，他关于强化学习在量化方面的探索得到了许多人的关注，最终他于次年加入杰富瑞（Jefferies Group）的数据科学团队。</p>
<p>成功转型之后的赛义德也开源了自己的框架：<a href="https://github.com/saeed349/Microservices-Based-Algorithmic-Trading-System">MBATS</a> 和 Cloud-MBATS，这两个框架专为在外汇现货和股票市场进行回测和实施基于机器学习的策略而设计。</p>
<p>这种分享行为植根于他自己的经历和 Qantopian 的影响，反映了赛义德对量化交易知识和工具平民化的信念，也成为金融平民化理念逐渐被人接受的一个例证。</p>
<p>这也正是 Fawce 的愿景。<strong>“我们的使命是打破量化圈的封闭，使得它能对所有人开放”</strong>。Fawce 在 Quantopian 网站上的一篇博客中这样写道，<strong>“众包阿尔法是一个登月计划，但 quantopian 成功地在宇宙中留下了痕迹，并让量化金融界的很大一部分了解我们并使用我们的工具”</strong>。</p>
<p>Quantopian 和赛义德等人的工作，为下一代宽客，特别是那些来自贫困背景、可能无法轻松获得此类资源的宽客提供了支持。如果没有 Quantopian 发出的号召，这些人的生活不会有机会改变。</p>
<p>Quantopian 旅程的结束并不意味着 Fawce 对金融平民化探索的终止。在 Quantopian 终止运营后，Fawce 和 Quantopian 一起合并进入了 Robinhood。这是一家主要面向散户的股票和加密货币经纪公司，在网上提供完全免费的服务。Robinhood 更是旗帜鲜明在把“democratize finance for all”写入了公司愿景。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Robinhood 是中世纪英国民间传说中的侠盗，是一位劫富济贫、行侠仗义、亦正亦邪的绿林英雄。一般译作罗宾汉。Robinhood公司使用这样一个名字，别有深义。</p>
</div>
<p>Robinhood 到 2022 年 4 月止，拥有 2280 万个账户和 1590 万个活跃用户，是一个更大的社区。这不是结束，也许反而是涓涓细流汇聚成河，是另一个探索的开始。</p>
<p>加入 Robinhood 之后的 Fawce 很少高调活动。不过，Quantopian 的老用户惊喜地发现，在 2023 年底，借着感恩节的时机，Quantopian 重启了社区教育，对每位在校学生免费开放。只要你的大学在<a href="https://github.com/Hipo/university-domains-list">university-domain-list</a> 当中，就可以免费注册并获得量化课程。</p>
<!--university-domain-list 是一个 github 项目，提供数据和访问 API https://github.com/Hipo/university-domains-list-->

<p>这也许是为了回应 Quantopian 关闭之后社区的呼声，以及他内心深处的价值观。在他的博客中，Fawce 写到，我哥哥的教育事业对我来说也是一种启发。我们的父母把我们的教育放在第一位。Quantopian 背后的大部分理念，即对机会和教育的奉献，来自我的父母和我的兄弟。将教育视为如此深刻的价值观也让我非常感激听到 Quantopian 为人民教育服务的故事。</p>
<h3 id="_1"><a class="toclink" href="2024/06/01/john-fawcett-with-quantopian/#_1">结束语</a></h3>
<p>在编写关于因子分析与机器策略的课程的过程中，无意中发现了 Fawce 的故事。受同样的理念激励的，不仅仅是 Quantopian, Fawce, Saeed，也包括分布在世界上其他地方的人，包括我自己。于是我决定暂停写作，花几天时间挖掘一下 Fawce 的故事，并和大家分享。</p>
<p><strong>因为知道因何而战，永远比战斗本身更重要。</strong></p>
<p>给所有量化人、和准备进入量化行业的人。</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-21 00:00:00">2024年5月21日</time></li>
        
          <li class="md-meta__item">
            分类于
            
              <a href="category/book/" class="md-meta__link">book</a></li>
        
        
          
          <li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="barra"><a class="toclink" href="2024/05/21/barra-risk-model-handbook/">Barra风险模型构建完全指南</a></h2>
<p>Barra风险模型是业内最有名的多因子模型之一。它最初由Barra Inc（创始人Barr Rosenberg）提出，后来被MSCI（明晟）收购，因此现在是MSCI的资产。在MSCI网站上，我们还可以看到名为BarraOne的产品推介。</p>
<p>很多想学习Barra模型的人，不知道Barra有一个官方的完全指南(《Barra Risk Model Handbook》)，全文共204页，系统地阐述了如何构建Barra风险模型，是最权威的一本指南。</p>
<p>Barr Rosenberg大学主攻的是文学（UC Berkeley），后来才转攻经济学。Everbody can quant，只要你想。</p>
<hr />
<p>关于Barra模型，常见的误解之一就是它是用来预测的投资模型。但实际上，它只是风险归因分析模型。关于这一点，最权威的说法无疑来自Barra自己的介绍：</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>Of course, MFMs have their limitations. They predict much, but not all, of portfolio risk. <strong>In addition, they predict risk, not return; investors must choose the investment strategies themselves.</strong></p>
</div>
<p>手册先用10页左右的篇幅解释了什么是多因子模型，以及相关的数学基础。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>关于因子分析的数学基础，可以参考Peter Tryfos(约克大学教授)的《商业分析与预测方法》中的<a href="/assets/ebooks/methods of business analysis and forecasting.pdf">第14章</a>，讲得深入浅出。</p>
</div>
<p>在第二和第三部分，先是回顾了从马科维茨到CAPM以及APT，然后介绍了Barrar 权益多因子模型：</p>
<p><img alt="50%" src="https://images.jieyu.ai/images/2024/05/barra-equity-mfm.jpg" /></p>
<hr />
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/barra-handbook-toc-1.jpg" /></p>
<hr />
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/barra-handbook-toc-2.jpg" /></p>
<p><a href="/assets/ebooks/barra_risk_model_handbook.pdf">下载</a></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-17 00:00:00">2024年5月17日</time></li>
        
          <li class="md-meta__item">
            分类于
            
              <a href="category/strategy/" class="md-meta__link">strategy</a></li>
        
        
          
          <li class="md-meta__item">
            
              需要 3 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="_1"><a class="toclink" href="2024/05/17/no-washout-no-advance/">暴力美学！洗盘模式如何检测？</a></h2>
<p><strong>无洗盘，不拉升。</strong> 筹码收集阶段，股价呈现出上涨形态，也吸引到许多不坚定的跟风盘，它们将成为主升过程中的不利因素。</p>
<p>因此，在拉升之前，主力会采用洗盘的方式，将这些不坚定的低价筹码洗下车。这个过程中往往暴涨暴跌，犹如一匹烈马，要摆脱它身上的骑手一样。</p>
<p><strong>暴力洗盘，某种程度上就成为了行情快速上涨之前的信号之一。</strong></p>
<p>这篇文章，我们量化实现的技术问题：如何快速检测出洗盘模式？</p>
<hr />
<!--
1. 举例
2. 检测算法及精讲
3. 验证（forward-return)
-->
<h3 id="_2"><a class="toclink" href="2024/05/17/no-washout-no-advance/#_2">定义</a></h3>
<p><img alt="L50" src="https://images.jieyu.ai/images/2024/05/washout-1.jpg" /></p>
<p>暴力洗盘是在证券市场上观察到的一种经验模式，因此没有严格的定义。一般把两阳夹一阴、且涨跌幅都巨大的情况认为是暴力洗盘。在本文中我们把两阳夹两阴、且涨跌幅都较大的情况定义为暴力洗盘。但我们介绍的方法，也完全适用于其它模式，只需要微调参数即可。</p>
<p>如左图所示，标的在1号位置之前，经过一段时间的吸筹，由于期间股价上涨，已经吸引了一些跟风盘。主力在1号位置拉出20cm，在这一过程中，较多跟风筹码被锁定在涨停位置。</p>
<p>第2天起主力开始洗盘，连续两天，分别下跌14.4%和18.9%。此时在1号位置买入的筹码因为忍受不住巨大的跌幅，忍痛交出筹码。主力筹码增加，成本降低，为后面的拉升留出了空间。</p>
<p>第4天主力将个股拉涨9.4%，表明洗盘结束。</p>
<p>随后几天的整理，主要是留出时间，让下一波的跟风盘有时间发现这支标的，并且有信心跟随买入。紧接着使用一系列小阳线做出上升趋势，最终再拉出一个20cm，从第4天起，短期涨幅高达87%。</p>
<hr />
<p>我们为什么要使用两阳夹两阴的4天模式来定义洗盘？</p>
<p>因为经过两天的洗盘，从时间和空间上看，洗盘效果会更好（考虑到交易者心理因素，一些人第一天亏损后，往往还不会绝望，第二天继续下跌，更容易崩溃卖出）。另外，从一些技术指标上来看，经过连续两天大幅下跌，技术指标修复比较到位，也更能为后面的拉升腾出上涨空间。</p>
<p>我们为涨跌幅设置一个阈值，如果期间的每个<code>bar</code>的涨跌幅超过这个阈值，我们就认为发生了洗盘。在我们的示例中，使用的阈值是0.05，即涨跌5%。</p>
<p>下面我们来看代码实现：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># 示例1</span>
<span class="k">def</span> <span class="nf">feature_washout</span><span class="p">(</span><span class="n">bars</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.05</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;返回在bars中最后一次洗盘结束的位置，-1表示最后一个bar,</span>
<span class="sd">        0表示不存在洗盘模式</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">close</span> <span class="o">=</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span>
    <span class="n">opn</span> <span class="o">=</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;open&quot;</span><span class="p">]</span>
    <span class="n">truerange</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">close</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">close</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> 
                           <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">opn</span><span class="o">-</span><span class="n">close</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])</span> 
    <span class="c1"># 百分比化</span>
    <span class="n">tr</span> <span class="o">=</span> <span class="n">truerange</span> <span class="o">/</span> <span class="n">close</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="p">(</span><span class="n">opn</span> <span class="o">&lt;</span> <span class="n">close</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">signed_tr</span> <span class="o">=</span> <span class="n">tr</span> <span class="o">*</span> <span class="n">sign</span>
</code></pre></div></td></tr></table></div>
<hr />
<p>这里我们使用了<code>truerange</code>这个变量名,是因为这段代码脱胎于技术指标<code>TR</code>。</p>
<p>这段代码解决如何将涨跌幅转换为由1,-1和0表示的模式，以便我们后面进行模式检索。</p>
<p>如果当天涨跌超过5%，或者实体的振幅超过5%，我们就将其标记为1或者-1，否则标记为0。标记的符号由它的形态是阴线还是阳线决定。阴线为-1，阳线为1.</p>
<p>我们通过这样一段简单的代码就实现了求阴阳线的功能：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="n">opn</span> <span class="o">&lt;</span> <span class="n">close</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span><span class="mi">1</span>
</code></pre></div></td></tr></table></div>
<p>其结果将生成由1和-1组成的数组。无论是涨还是跌，我们总是认为，阴线是洗盘。所以，高开大阴线，即使收盘是上涨的，我们也当成洗盘来处理。</p>
<p>下图就是高开大阴线洗盘一例：</p>
<p><img alt="75%" src="https://images.jieyu.ai/images/2024/05/washout-with-high-open.jpg" /></p>
<hr />
<p>在判断每个bar的涨跌幅、或者实体的振幅是否超过阈值时，我们使用了一个简单的技巧，即通过<code>np.maximimum</code>来从<strong>多个</strong>数组中，以 <code>element-wise</code> 的形式选取最大值。即，如果有数组<span class="arithmatex">\(A\)</span>和<span class="arithmatex">\(B\)</span>，那么<span class="arithmatex">\(np.maximum(A, B)\)</span>将返回一个数组，其元素为<span class="arithmatex">\(A\)</span>和<span class="arithmatex">\(B\)</span>对应位置的元素中的较大值。</p>
<p>也就是，如果结果是<span class="arithmatex">\(C\)</span>，那么<span class="arithmatex">\(C_0\)</span>将是<span class="arithmatex">\(A_0\)</span>和<span class="arithmatex">\(B_0\)</span>中的较大值，<span class="arithmatex">\(C_1\)</span>将是<span class="arithmatex">\(A_1\)</span>和<span class="arithmatex">\(B_1\)</span>中的较大值，以此类推。</p>
<p>除了使用<span class="arithmatex">\(np.maximimum\)</span>这种 ufunc 之外，实际上<span class="arithmatex">\(np.max\)</span>也可以用来完成这项任务，只是我们需要先将数组<span class="arithmatex">\(A\)</span>和<span class="arithmatex">\(B\)</span>堆叠成一个矩阵：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># 示例2</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">))</span>

<span class="c1"># 通过np.max求每列最大值</span>
<span class="n">r1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># 通过np.maximum求最大值</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="o">.</span><span class="n">reduce</span><span class="p">([</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">])</span>

<span class="c1"># 比较两种方法的结果是否相同</span>
<span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<hr />
<p>为了提供更多信息，示例中我们演示了三个数组按元素求最大值的情况。答案是要使用<code>reduce</code>方法。如果只在两个数组间进行比较，则可以只使用<code>np.maximum</code>。</p>
<p>经过示例1处理后，我们可能得到如下所示的数组：</p>
<p>[ ...  0.04 -0.02 -0.06  0.04 -0.04 -0.    <red>0.2
 -0.14 -0.19  0.09</red> -0.03 ...]</p>
<p>显然，我们还应该把它二值化，转换成为[大阳,大阴,大阴,大阳]（即[1, -1, -1, 1]）这样的模式：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># 示例3</span>
<span class="n">encoded</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">signed_tr</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">,</span> 
                    <span class="n">signed_tr</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">threshold</span><span class="p">],</span> 
                    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span> <span class="o">-</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">encoded</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]):</span>
        <span class="k">return</span> <span class="n">i</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span>
<span class="k">return</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
<p>我们通过<code>select</code>方法完成了二值化转换。接下来我们通过一个逆序的循环，通过<code>array_equal</code>完成了模式匹配。</p>
<p>在回测中，我们可能需要一次性地提取出很长一段行情中所有的洗盘模式，并对其效果进行检验。上面的代码还可以通过<code>numpy.lib.stride_tricks.sliding_window_view</code>进行优化：</p>
<hr />
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">feature_washout</span><span class="p">(</span><span class="n">bars</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">washouts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">patten</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sliding_window_view</span><span class="p">(</span><span class="n">encoded</span><span class="p">,</span> <span class="n">window_shape</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">patten</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]):</span>
            <span class="n">washouts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">washouts</span>
</code></pre></div></td></tr></table></div>
<p>通过将涨跌幅二值化，我们就可以在随后方便地通过<code>array_equal</code>来匹配模式。我们这样做，是因为在这里定性分析基本就够了，只要涨跌幅超过5%，那么无论是跌了5.1%还是7.2%，我们都认为是洗盘。</p>
<p>但是，如果你觉得定量分析仍然有意义，也可以通过求皮尔逊相关系数的方法来进行模式匹配。</p>
<p>不过，被匹配的模式，应该使用多少呢？如果你对此感兴趣，可以评论区留言，获得推荐参数。</p>
<!--
无洗盘，不拉升。除了少数低波动的白马股外，短期暴涨的个股，似乎必须经历暴力洗盘。就有如一匹配野马，只有摆脱了它身上的骑手，才能脱缰奔驰。

这篇文章定义了洗盘的数学模型，并给出检测算法。你还将学习到以下常用函数：

1. np.maximum
2. np.maximum.reduce
3. np.max(..., axis=0)
4. array_equal
5. sliding_window_view

===
题图故事
===

今天是著名的音乐播放器 Winamp 宣布开源的日子。Winamp的创始人是犹他州校友。该校还培养了Adobe和Pixar公司的联合创始人。
-->
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-16 00:00:00">2024年5月16日</time></li>
        
          <li class="md-meta__item">
            分类于
            
              <a href="category/%E7%AE%97%E6%B3%95/" class="md-meta__link">算法</a></li>
        
        
          
          <li class="md-meta__item">
            
              需要 3 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="-"><a class="toclink" href="2024/05/16/look-ahead-bias-what-and-why/">前视偏差 - 看似明白，实则糊涂</a></h2>
<p>之前有一篇关于数据标注的笔记，得到了较多关注，也引起了一些同学质疑：</p>
<p><strong>你使用了zigzag函数，这不会引起未来数据吗？</strong></p>
<p>未来数据更学术化的说法叫前视偏差（look-ahead bias），回测中引入了未来数据，确实是做量化中很容易犯的一个错误。</p>
<p>这篇笔记解释了zigzag为什么用在标注中，不会产生未来数据。我们还列举了一些<strong>其它前视偏差的例子</strong>。这些是量化的经验之谈，来自实践，很少能在论文中看到。</p>
<h3 id="zigzag-peak_and_valley_pivots"><a class="toclink" href="2024/05/16/look-ahead-bias-what-and-why/#zigzag-peak_and_valley_pivots">Zigzag与 peak_and_valley_pivots</a></h3>
<p>在之前的笔记中，我提到了使用zigzag函数来寻找k线中的波峰与波谷，并作为监督学习的标注数据。如果波峰记为1，波谷记为-1，其它的都记为0，则我们一共生成了三类标签。</p>
<p>这个标注数据还包含了原始的k线数据。因此，你可以基于这个数据集，构造自己的特征数据来训练模型，使之能预测一段行情的顶和底。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/zigzag-label-sample-0.png" /></p>
<p>构建特征数据（因子）时，可以用<strong>RSI、均线拐头、上下影线、成交量放大、整数位等支撑、压力指标、压力线、支撑线</strong>等等。</p>
<p>数据标注使用zigzag包里的peak_and_valley_pivots函数。这个包可以通过以下命令进行安装：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>zigzag
</code></pre></div></td></tr></table></div>
<p>peak_valley_pivots接受三个参数，第一个是要检测峰谷的时间序列，第二个参数用来设置下跌的幅度、第三个参数用来设置上涨的幅度。</p>
<p>也就是说，在序列<span class="arithmatex">\([t_0, t_1, t_2]\)</span>中，如果<span class="arithmatex">\(th_1\)</span>是下跌阈值，<span class="arithmatex">\(th_2\)</span>是上涨阈值，则当 <span class="arithmatex">\(t_1 &gt;= t_0 \times (1 + th_2)\)</span> 并且 <span class="arithmatex">\(t_2 &lt;= t_1 \times (1 + th_1)\)</span>时，<span class="arithmatex">\(t_1\)</span>就会被标记为波峰，如下图所示：</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/peak_valley_pivots_rational.jpg" /></p>
<p>在Python中，还存在其它许多类似的库，最著名的是来自scipy.signals模块下的 find_peaks, find_peaks_cwt, argrelextrema 等。这些函数都要求我们至少设置判断峰谷的涨跌阈值（绝对值），有的还会允许设置驻点窗口大小。但是，zigzag 包中的peak_valley_pivots 方便之处在于，它不是通过绝对值来设置阈值，而是通过输入一个百分比来设置 -- 这是我们更常遇到的场景。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>数字信号处理(Digital Signal Processing)在量化上有特殊的用途。<strong>文艺复兴</strong>早期在招人时，就很看重具有数字信号处理经验的人，他们从IBM viavoice团队挖了不少人。早期的声音识别是典型的数字信号处理应用，现在才全部转为深度学习。像傅立叶变换、小波变换等技巧，至今仍有不少论文在研究。</p>
</div>
<p>在具体使用peak_valley_pivots时，有两个简单的技巧。</p>
<p>首先，如何设置涨跌阈值？在实践中，我们常常先求得时间序列的每期涨跌幅。对股价波动而言，这是一个近似于平稳的序列。对这个序列求其标准差，±2倍标准差就可以作为阈值。</p>
<p>如果股价的涨跌近似于正态分布，那么如果t1超过t0达到2倍标准差的概率应该小于5%，把它认为是一个Outlier（离群值）显然是合适的（注意这里有很多近似处理的地方。严格来讲，股价涨跌近似于正态分布，并且股价超过平均值2倍标准差，概率才会小于5%）-- 换句话说，它就是我们要找的峰（或者谷）。</p>
<p>另一个技巧是，你必须理解peak_valley_pivots是如何处理头尾的数据的。</p>
<h3 id="zigzag"><a class="toclink" href="2024/05/16/look-ahead-bias-what-and-why/#zigzag">为什么说“zigzag会引起前视偏差”？</a></h3>
<p>无论如何，peak_valley_pivots都在序列索引为0和-1的位置处，返回峰（1）或者谷（-1）的标签，无论这些点上的涨跌是否达到了阈值。这也是我们这篇笔记讨论前视偏差的起点。</p>
<p>我们再回顾一次之前的标注图。这一次，我们加入了一些序号以方便讨论。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/zigzag-labels-sample-1.jpg" /></p>
<p>在这个图中，peak_valley_pivots 对位置1和位置2都给出了标注，分别是-1和1。</p>
<p>但是，我们的标注工具没有显示位置2的标注。因为此时这个标注并不能固定下来。当我们投喂更多的数据时，我们发现，在位置2处的标注消失了（指peak_valley_pivots的返回结果，而非图中的显示），直到4月6日下午14：30分，peak_valley_pivots 才重新给出了标注（见位置3）。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/zigzag-labels-sample-2.jpg" /></p>
<p>这是我们在标注历史数据时会发生的情况。如果我们的标注工具是一次性地对一个非常长的序列进行的标注，那么我们将只会在头和尾遇到一次这样的问题（⚠️⚠️但是，此时阈值会在这个序列的全生命期上进行计算，这个阈值将会与只在近期较短一段时间上计算出来的不一致）。</p>
<p>在对数据进行分批标注时，数据被截断，从而引入了更多的头和尾，在这些边界上， peak_valley_pivots都给出标注，但往往是不稳定的（对开头而言，它很可能是错的或者多出来的）。但从倒数第二个标注起，它就已经被固定下来，不会变更。</p>
<p>这样会引起未来数据吗？</p>
<p>当然不会。这个标注过程完全正确。</p>
<p>⚠️但一些同学使用zigzag，并不是用来做数据标注的，而是用它来做回测的，这就会出现问题。⚠️</p>
<p>这个回测错误具体地说是这样产生的：在<span class="arithmatex">\(t_2\)</span>时间点时，检测到了发生在<span class="arithmatex">\(t_1\)</span>时间点上的一个峰，此时，如果按<span class="arithmatex">\(t_1\)</span>的价格去卖出：</p>
<ol>
<li>如果回测系统是正确的，模拟交易不可能完成。如果能够完成，意味着股价又返身向上了，此时在<span class="arithmatex">\(t1\)</span>和现在的时间点<span class="arithmatex">\(t_0\)</span>之间，已经出现一个谷底。这意味着我们把该持有的股票，错误地卖出了。</li>
<li>有的同学可能使用自己写的回测系统，比如，通过pandas dataframe来做向量回测，此时就非常容易引入错误，导致在<span class="arithmatex">\(t_0\)</span>时间点时，回到<span class="arithmatex">\(t_1\)</span>时间点，以该点时的价格，将股票卖出在最高点。</li>
</ol>
<p>这是一个很容易理解，但又常常会隐藏在你的代码中的错误 -- 如果你不了解回测系统的运行原理的话。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>既然zigzag的顶底标注不能用来预测，那么它还有用吗？答案是肯定的。虽然我们不能用zigzag来预测顶底，但是，它可以用来标注历史数据，以验证我们找出来的关于顶和底的特征是否属于高概率特征。<br><br>如果是，那么在实盘中，当这些特征再次出现时，我们就敢于预测，一个顶或者底出现了。</p>
</div>
<h3 id="_1"><a class="toclink" href="2024/05/16/look-ahead-bias-what-and-why/#_1">前视偏差常见的场景</a></h3>
<p>产生前视偏差的场景很多。一般来说，它往往产生于数据的采集和发布过程，或者产生于加工处理方法。</p>
<p>比如，财务数据很容易产生前视偏差。财务数据常常以季度为单位进行“索引”。很自然地，财务数据的编制和发布时间要晚于这个“索引”时间。</p>
<p>以2019年一季度美国的宏观经济数据发布为例。GDP预估值发布于2019年4月25日；5月30日进行第一次修正；最终修正则是在当年的6月27日。这是正常和可预料的情况。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>在回测和实盘中如何避免这种前视偏差？在我们的《量化二十四课》的第22课有详细说明。</p>
</div>
<p>财务造假也会造成前视偏差。举一个A股中真实的例子。某海产品养殖公司，2014，2015年连续两年亏损被ST，如果2016年再亏损，按当时规则将进入退市流程。于是，2017年3月，该公司公布了2016年年报，净利润7571万，扭亏为盈，成功保壳。2019年，最终查实他们虚增利润1.3亿，追溯修订2016年财报为亏损-5543万。</p>
<p>如果我们现在（2024年）运行回测，由于这些数据已经得到了修正，当回测运行到2017年3月，我们取得的财报数据将是-5543万，这会帮助我们在回测中避开这个雷；但在2017年5月，实盘中获取到的该公司上年净利润为7571万。但你的模型在实盘中无法避开这种雷。</p>
<p>其它引起前视偏差的典型场景还有：</p>
<ul>
<li>前复权</li>
<li>引用错误</li>
<li>偷价</li>
<li>统计函数如max、min、rank等，也包括zigzag类的函数</li>
</ul>
<p>除了前视偏差，我们在回测中还可能遇到幸存者偏差、过度拟合、冲击成本、交易容量不足、回测时长不足、交易规则错误等各种偏差。这些都是只有在实战中才能获得的经验，我们在《量化二十四课》中都有介绍，可以帮你迅速提升经验值，由量化萌新成长为量化高手。</p>
<p>你也可以继续关注本号，我们后续会有机会深入讲解这些概念。</p>
<h3 id="_2"><a class="toclink" href="2024/05/16/look-ahead-bias-what-and-why/#_2">封面故事</a></h3>
<p>封面是石溪大学的Charles &amp; Wang中心，由美籍华人、亿万富翁、CA科技创始人王嘉廉捐助修建，是一座帮助人们了解亚洲文化和世界其它文化相互作用的建筑。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/stony-brook-charles-wang-center.jpg" /></p>
<p>该建筑由砖块和白色半透明玻璃组成，象征着中国传统建筑中的窗楹蒙纸，此外还有一座带台阶的拱桥，让人联想到中国的寺庙。其内部有一个供学生使用的东亚美食广场，以便让人了解东亚、特别是中国的美食文化。</p>
<p>石溪大学与华人很有缘。杨振宁在此执教37年。丘成桐在此担任过助教。陈省身则是石溪的荣誉博士。</p>
<p>石溪大学出了很多名人，共拿了至少8个诺奖。量化教父James Simons则曾任该校数学系主任。</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-11 00:00:00">2024年5月11日</time></li>
        
          <li class="md-meta__item">
            分类于
            
              <a href="category/%E4%BA%BA%E7%89%A9/" class="md-meta__link">人物</a></li>
        
        
          
          <li class="md-meta__item">
            
              需要 3 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="-"><a class="toclink" href="2024/05/11/be-guided-by-beauty/">追随美的指引-纪念西蒙斯</a></h2>
<p>周六早上醒来，James Simons（西蒙斯）辞世的消息刷屏了。多数人知道他，是因为他的财富和量化对冲基金公司-文艺复兴。但他更值得为人纪念的身份，则是数学家和慈善家。</p>
<p>西蒙斯1938年生于麻省，毕业于MIT，在UC Berkeley获得博士学位。曾任职于MIT， Harvard，后来在SBU（Stony Brook University，纽约州立大学石溪分校）担任了数学系主任。此后他跨行到了金融界，开创了传奇式的文艺复兴对冲基金。</p>
<p>西蒙斯作为数学家，最大的成就是他与陈省身共同提出的Chern-Simons Theory，这一理论在低维拓扑学、量子场理论和弦理论中有着广泛的应用。</p>
<hr />
<p>下图就是据说是流体冲击情景下的Chern-Simons Form随曲面三维位置和极坐标位置变化的示意图（根据鹿鹿数模@知乎提供的代码绘制），因为觉得很美，根据西蒙斯的“指导原则”：“be guided by beauty”，就把这个图贴上来。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/chern-simons-form.jpg" /></p>
<hr />
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Be guided by beauty. 2014年在MIT举办的AMS（美国数学学会）Einstein Lecture上，西蒙斯应邀发表了名为《Mathematics, Common Sense, and Good Luck: My Life and Careers》的演讲，在演讲中，他给听众介绍了这样一些指导原则：<br>
<br>始终去做一些新的东西；
<br>追随美的指引；
<br>不要轻易放弃。</p>
</div>
<p>西蒙斯很早就有做生意的兴趣。在26岁时，因为背上债务，不得不委身于军方，帮助他们破译密码。这项工作对他来说十分轻松，但报酬却很高。不过，由于他毫不避讳地坚持反战，这与他上司的上司的立场截然相反，最终被解雇。</p>
<p>随后他进入石溪分校，担任了数学系主任。这项工作中，最重要的任务可能就是挖角。可能是因为之前一直有做生意的历练，他在这一任务中如鱼得水，囊括了大量人才，一度导致同州的康纳尔大学向州长抗议。最终，经他的努力，石溪分校数学系终于从一文不名发展到有20多位数学家、成为世界顶尖的几何学研究中心之一。这也为他后来成功创办文艺复兴打下了人才基础。</p>
<p>不过，伯乐也有相不中马的时候。他在石溪最大的损失，就是没能发掘出当时还在担任助教的丘成桐，也就是最近因为在华中科技大学的一个演讲，受到项立刚等等“专家”攻击的数学巨搫。不过，西蒙斯一直跟华人科学家很有缘分。下图是他与杨振宁、陈省身的合影：</p>
<hr />
<p><img alt="75%" src="https://images.jieyu.ai/images/2024/05/chern-yang.png" /></p>
<p>虽然在平凡之辈看来，西蒙斯是天纵英才，但也有他解决不了的难题。在试图证明某些有几何定义的数字（比如<span class="arithmatex">\(pi\)</span>，几乎在任何情况下都是无理数这一猜想时，遇到了挫折，让他变得灰心丧气甚至有点绝望，并最终将他推向了金融界。</p>
<p>1978年，西蒙斯成立投资公司并专职做交易。</p>
<p>对于他的离职，不同的人有不同的看法。他的父亲说他放弃终身教职是犯了一个错误，他更愿意别人问起儿子的工作时，能够回答说是“数学家”而不是“企业家”。大部分数学家认为以追求金钱为目的是不光彩的。他的同事沙利文认为，数学是神圣的，吉姆是认真的数学家，是可以解决最棘手问题的人。而康纳尔大学的卡莫纳则批评得更为尖锐，认为他是“把灵魂卖给了魔鬼”。</p>
<hr />
<p>有这样一群“清高”的人作为土壤，这也许是他们基础学科得以发展的重要原因之一吧。</p>
<p>不过，对西蒙斯来说，亦师亦友的陈省身对他离职的看法，则更耐人寻味。陈省身说，你又不是希尔伯特式的人物，转就转呗，反正数学界也不会损失什么。</p>
<p>西蒙斯转型做投资也并非一翻风顺。直到1989年，他们的交易策略仍然是主观和量化相结合的。他回忆到，有时候你像个英雄一样赚钱，有时候又像个狗熊一样的赔了。后来，他们决定完全转向量化，并且放弃一切宏观指标。由此开始，文艺复兴，特别是旗下的大奖章基金，开始了自己的狂飙时代。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/simons-1.jpg" /></p>
<p>从1988年到2019年，西蒙斯的大奖章基金年化收益率为39%（费前收益率则是66%！）。与之对比，巴菲特1965年—2018年的年均净值增长率为21%、索罗斯旗下量子基金从1969年—2000年的年均收益是32%。</p>
<hr />
<p>西蒙斯也在2019年，成为财富榜上排名第21位的人。</p>
<p>很多人很好奇大奖章为何如此厉害，它的成功密诀究竟是什么？这也许是个永远的迷，不过，我们也有一些解读这个秘诀的一些线索。</p>
<p>一是美国证券交易委员会（SEC）1988年批准了电子交易，这是实现高频交易的技术基础。</p>
<p>二是从西蒙斯挖人来看，他招了不少之前在IBM via voice项目组做语音识别的人，语音识别与股价涨跌一样，同样是一维的时间序列。因此，预测一维时间序列的波动（即趋势和反转）应该是有意义的。只不过，随着技术的发展，我们应该、也可以使用新的技术（比如神经网络）来预测一维时间序列的波动。</p>
<p>第三个线索则比较有意思。在国内如果我们要挖掘一家公司的秘密，有时候会去裁判文书网搜索。西蒙斯的公司也曾卷入过诉讼。在一起诉讼中，一些商业秘密不得不被批露。两名文艺复兴的前员工表示，文艺复兴公司开发了涉及互换交易的一种策略。他们在法庭文件中将其描述为“大规模骗局”，违反了SEC管理卖空的规定。彭博社曾对此作过报道，现在这篇报道还可以在<a href="https://infoproc.blogspot.com/2007/07/algorithm-wars.html">这里</a>读到。</p>
<p>这里我们不评价文艺复兴的做法是否真正违法。无论如何，<strong>规则有漏洞，那是规则的问题</strong>。在交易中，找到这些规则的、技术上的“漏洞”（或者交易机会），是高胜率策略的关键之一。</p>
<hr />
<p>文艺复兴的另一个成功秘诀，可能是所谓的壁虎式交易法则：即交易要像壁虎一样，平时趴在墙上一动不动，蚊子一旦出现就迅速将其吃掉，然后恢复平静，等待下一个机会。不过，如何理解这个法则，不同的人可能会有不同的解读了。</p>
<p>真正指引文艺复兴成功的因素，其实西蒙斯自己介绍过。秘诀就是围绕一些非常优秀的科学家来构建公司，这些科学家是经过相应考核的，公司独特的激励机制，也使得他们能一直跟公司在一起。这个激励机制的核心就是大奖章基金，它只对公司员工开放，而且每个人的薪资主要与整体的表现、而不是个人的表现相关。</p>
<p>如何复制这样一个团队，这可能不仅仅是令国内的机构感到困难的地方，甚至在全球都是这样。这才是文艺复兴真正的护城河，而这种领导力，西蒙斯从在石溪担任数学系主任时就开始构建了。</p>
<p>“不管我在做什么，我总觉得自己像个局外人，”西蒙斯说，“我全神贯注于数学，但我从来没有觉得自己是数学系的一员。我总是有一只脚在那个世界的外面。”</p>
<p>然而，当西蒙斯转身到投资界后，事情刚好反过来，他的一只脚，又踏回了数学界。</p>
<p>1996年，他的儿子保罗车祸遇难。2003年，小儿子尼古拉斯溺水身亡。西蒙斯选择以自己的方式逃避痛苦，开始潜心琢磨那些流传已久悬而未决的数学谜题。“那是避风港，是我心中一个安静的角落”。</p>
<hr />
<p>2007年，他与苏利文发表了《微分形式普通上同调的公理特征》这篇论文，又杀回了数学界。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/simons-and-wife.jpg" /></p>
<p>文艺复兴和高频量化赚了很多钱。西蒙斯也常常会被问起，高频交易究竟有何意义？每次西蒙斯都会回答，高频交易提供了流动性，使得价格发现更加有效，并且降低了做市商利润，从而使得总体交易成本下降。很难说西蒙斯自己对这个回答有多满意。</p>
<p>可以说，西蒙斯前半生是在追逐利润，后半生则是在追寻人生的意义。带着对人生意义的追寻，西蒙斯开启了慈善家的生涯。</p>
<hr />
<p>西蒙斯于2004年创立了Math for America协会，旨在促进纽约市中学数学教师的招募。这可能跟他第一次放弃教职，转投军方项目有关。</p>
<p>他解释说，我们通常认为，我们的老师懂数学。你会说当然了。但是很让人吃惊的是，尤其是当你上了中学的时候，你会发现大部分的数学老师数学懂得却不多。其中一种回答就是如果他们真的懂这门学科，那他们可以带着同样多的知识去 Google，Goldman Sachs或者什么其他地方。所以我们必须使这个职位变得更加吸引人，这也就是说给他们发更高的工资，这也正是我们在纽约和几个其他城市通过我们的项目正在做的，给老师们更多的尊重，并提供更多的支持。</p>
<p>西蒙斯还大量捐赠以支持对基础科学的研究，捐赠超过了10亿美元。他提到，如果单从对基础科学的投资规模上讲，应该还没有一个基金的规模能够与我们相比。</p>
<p>2010年，他签署了一项协议，将把他所有的财富，捐给慈善事业。</p>
<p>西蒙斯对中国也有捐赠。清华捐有一栋专家公寓楼，就是他捐赠的，以“陈赛蒙斯”命名。</p>
<hr />
<p><img alt="" src="https://images.jieyu.ai/images/2024/05/chern-simons-hall.jpg" /></p>
<p>在西蒙斯逝去时，我想，他更希望被人作为数学家和慈善家被纪念，而不是企业家。这也是他父亲对他的期望。他做到了。</p>
<p>财富扩大了西蒙斯的影响力，数学和慈善则延长了他的生命。</p>
<p>这是西蒙斯在AMS演讲上给出的人生指南：</p>
<ul>
<li>Do something original</li>
<li>Be guided by beauty</li>
<li>Don't give up easily</li>
<li>Hope for good luck.</li>
</ul>
<!--
成就介绍

用数学打败巴菲特的人
主要成就是Chern-Simons理论，维布伦(Veblen)奖（丘成桐也获得过此奖）

他在25岁赴哈佛大学任教，26岁为美国军方破译密码，30岁成为纽约州立大学石溪分校的数学系主任，38岁获得了代表几何领域最高成就的奥斯瓦尔德·维布伦几何奖。

从1988年到2019年，西蒙斯的大奖章基金年化收益率为39%（费前收益率则是66%！），巴菲特1965年—2018年的年均净值增长率为21%、索罗斯旗下量子基金从1969年—2000年的年均收益是32%。

壁虎式投资法

交易要像壁虎一样，平时趴在墙上一动不动，蚊子一旦出现就迅速将其吃掉，然后恢复平静，等待下一个机会

石溪

慈善： 西蒙斯后来在清华捐建了“陈一西蒙斯”专家公寓楼

财富扩大了影响力，但数学领域的贡献则延长了他的生命。

做主观交易，有时候你像个英雄一样赚钱，有时候又像个狗熊一样的赔了。

但从78年开始，直到89年才开始成功。模型里面的宏观经济数据的部分完全剔除，只留下纯粹的技术性数据，同时把注意力集中在短线交易上

《征服市场的人：西蒙斯传》

刺头： 被军方解雇，挖人挖到康纳尔向州长抗议

“不管我在做什么，我总觉得自己像个局外人，”他后来说。【5】“我全神贯注于数学，但我从来没有觉得自己是数学系的一员。我总是有一只脚在那个世界的外面。”

我们真正要建模的是人类行为。

数学是神圣的，吉姆是认真的数学家，是可以解决最棘手问题的人。--苏利文
我喜歡跟人說我那個教授兒子，而不是我那個做生意的兒子 -- 老爸

量化有何意义？大量的資金回饋給學術界，贊助基礎研究、教育

文艺复兴公司的心脏地带并不是夜以继日不停交易的交易室，而是一间有100个座位的礼堂。每隔半个月，公司员工都会在那里听一场统计学演讲。

没有被卫斯理录取

如果单从对基础科学的投资规模上讲，应该还没有一个基金的规模能够与我们相比。首先，我们给相关机构提供钱，我们帮助MIT提供资金给我们数学系的教授做科研。

Math for America,我们通常狭义的观点是，我们的老师懂数学。你会说当然了。但是很让人吃惊的是，尤其是当你上了中学的时候，你会发现大部分的数学老师数学懂得却不多。其中一种回答就是如果他们真的懂这门学科，那他们可以带着同样多的知识去 Google，Goldman Sachs或者什么其他地方。因为现在的世界变得更加数量化，经济也比三四十年之前更多地建立在数量化的方法上。即使他们适合做老师，但因为存在着薪资水平以及名誉地位的不同，他们也会被其他地方挖走，你很少看见这些人留在课堂上面授课。所以我们必须使这个职位变得更加吸引人，这也就是说给他们发更高的工资，这也正是我们在纽约和几个其他城市通过我们的项目正在做的，给老师们更多的尊重，并提供更多的支持。只要我们给他或者她多支付 25%的薪酬，让他们感觉到不一样。一下子，这个职业就变得更加好了。如果我们让这个职业变得更加吸引人了，那就会有人追求这个职业。如果我们什么都不做，那情况将会变得很糟糕。所以这是我们每个人都应该考虑的问题。 

“被美丽指引”是一个很不错的指导性原则
-->
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-25 00:00:00">2024年4月25日</time></li>
        
          <li class="md-meta__item">
            分类于
            
              <a href="category/strategy/" class="md-meta__link">strategy</a></li>
        
        
          
          <li class="md-meta__item">
            
              需要 2 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="_1"><a class="toclink" href="2024/04/25/how-top-divergency-formed/">终极猜想！底蓓离的成因分析</a></h2>
<p>这几天圈内都在传底蓓离什么的。作为严肃的量化自媒体，我们就不跟着吃这波瓜了。不过，我一直很关注技术指标的顶背离和底背离，一直在追问它的成因如何，以及如何预测。</p>
<p>底蓓离把我目光再次吸引到这个领域来，于是突然有了一个猜想。虽然我还没来得及完全证实它，但这个猜想，值得你锁定我的频道。</p>
<p>这个猜想是：<strong>RSI的日线顶背离，是因为周线还有上升空间。当周线RSI也达到前期高点时，就会触发回调。此时日线虽然创新高，但高位筹码不稳，回调增多，导致RSI下降。</strong></p>
<hr />
<h3 id="_2"><a class="toclink" href="2024/04/25/how-top-divergency-formed/#_2">背离的定义</a></h3>
<p>Investopedia对技术指标的#顶背离定义为：</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>背离是指资产价格的走势与技术指标（例如震荡指标）相反，或者与其他数据相反。背离警告当前价格趋势可能正在减弱，并且在某些情况下可能导致价格改变方向。<br><br>存在正背离和负背离。正背离表明资产价格可能上涨。负背离表明该资产可能会下跌。</p>
</div>
<p>在国内，我们一般使用顶背离和底背离这两个术语。最早大V中较多讨论这两个术语的，可能是<strong>炒股养家</strong>或者<strong>缠中说禅</strong>，说明这一现象在实战中是比较受到关注的。</p>
<p>下图中的右图展示了一个日线的顶背离。左图则是对应的周线情况。</p>
<p>附图指标我使用的是RSI，它是一个非常好的震荡指标，深刻反映了当前市场的赚钱效应和强弱力量对比。</p>
<p>在图中，程序自动标注出来了k线的每一个峰和谷。这些标注使用了我们自己的自适应参数算法，在绝大多数时间、无论周期是哪个级别，都能工作得很好。不过这一次，在周线级别上，没能触发它标注出3月22日那一周的高点。</p>
<hr />
<p><img alt="" src="https://images.jieyu.ai/images/2024/04/top-rsi-divergency-day.jpg" /></p>
<p>从右图中我们注意到，日线上存在2月27日和3月18日两个峰，后一个峰的价格高于前一峰，但后一个峰的RSI略小于前一峰的RSI（前高78.3，后高77.7），形成了顶背离。</p>
<p>我们在课程中详细介绍过一个<strong>独创但更准确</strong>地理论，在运用RSI时，不是低于30就会反弹，高于70就会回调，而是要看它跟前一个峰（或者谷）的RSI相比较，如果上涨时，RSI高于前一个峰对应的RSI，则有可能回调。</p>
<p>但这个结论也有自身的问题：一是在图中，日线在2月27日之前，就已经突破了2024年1月25日下降通道中高点RSI，为何一直到2月27日才回调？我们在课程中已经解决了这个问题。</p>
<hr />
<p>二是为何在2月27日之后，股价还能一直上涨，直到3月18日出现顶背离？这个顶背离问题，我也一直没有思路，但自己着手写了好几个检测顶背离的例程。</p>
<h3 id="_3"><a class="toclink" href="2024/04/25/how-top-divergency-formed/#_3">猜想和验证</a></h3>
<p>现在我们给出回答第二个问题的一个猜想，即尽管2月27日的日线RSI已经达到高位，但周线RSI仍在低位，它没有表示<strong>反对和阻止上涨的意思</strong>，因此日线短暂调整后，在<strong>其它因素趋动下</strong>继续上涨，直到3月22日那一周，盘中突破前高60.5，才引发了一个周线级别的大回调。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>从3月21日起，到3月27日止，中证1000连续回调超过6.94%，从而引发反弹，这是另外一个故事和机会。我们在前面的一篇文章中介绍过，统计数据给出3月27日收盘后，反弹概率超过91.4%的结论，这种情况，应该坚决<strong>抄底</strong>。</p>
</div>
<p>RSI是反转指标。它只能以一定概率给出会不会反转，但你不应该指望它给出趋势延续的预测。那是趋势类指标的任务。最重要的趋势类指标，莫过于判断均线的斜率，如果线性回归误差在可接受范围以内的话。在回归误差较大而失效的情况下，课程中也给出了一个非常鲁棒的方法。</p>
<p>我们还是拿数据验证一下：</p>
<hr />
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># 日线2月27日、3月18日顶背离，前者RSI 78.3,后者RSI 77.7</span>
<span class="n">dclose</span> <span class="o">=</span> <span class="n">dbars</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<span class="n">drsi</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">RSI</span><span class="p">(</span><span class="n">dclose</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>

<span class="k">for</span> <span class="n">dt</span> <span class="ow">in</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">27</span><span class="p">),</span> 
           <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">18</span><span class="p">)):</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">dbars</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flatnonzero</span><span class="p">(</span><span class="n">mask</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">dclose</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">drsi</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

<span class="c1"># --- output ---</span>
<span class="c1"># 2024-02-27 5394.03 78.3</span>
<span class="c1"># 2024-03-18 5648.01 77.7</span>
</code></pre></div></td></tr></table></div>
<p>从数据看出，尽管日线价格在上涨，但RSI却下降了，构成了日线顶背离。</p>
<p>接着看周线：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># 周线rsi前高出现于2023年11月17日，数值为60.5</span>
<span class="n">wclose</span> <span class="o">=</span> <span class="n">wbars</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">nov_17</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span> <span class="mi">17</span><span class="p">))</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flatnonzero</span><span class="p">(</span><span class="n">wbars</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">nov_17</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">rsi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">ta</span><span class="o">.</span><span class="n">RSI</span><span class="p">(</span><span class="n">wclose</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">rsi</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<hr />
<p>前高为60.5。这里有一个<strong>技巧</strong>，如果没看明白，可以给我留言：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># 3月22日，周线rsi数值盘中突破 61.9，高于前高60.5，触发回调</span>

<span class="n">mar_22</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">22</span><span class="p">))</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flatnonzero</span><span class="p">(</span><span class="n">wbars</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">mar_22</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">wclose</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">wbars</span><span class="p">[</span><span class="s2">&quot;high&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>

<span class="n">rsi</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">RSI</span><span class="p">(</span><span class="n">wclose</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">rsi</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>rsi后高为61.9，因此触发回调，并且这个阻力得到了确认。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>注意这里rsi没有到70就回调了。所以，你看到的所有关于RSI的教科书，都该改改了。是不存在 one size fits all。不同的标的、不同的周期以及不同的阶段，应该有不同的参数。这些参数应该可以通过量化程序（或者机器学习）计算出自适应的值。</p>
</div>
<h3 id="_4"><a class="toclink" href="2024/04/25/how-top-divergency-formed/#_4">引申结论及思考</a></h3>
<p>在这个市场上，存在各种不同操作频率（这是FFT和wavelet应该有用的原因）的资金。</p>
<hr />
<p>对高频量化，他们看的是tick级数据，可能持有几分钟就会调仓；散户和量化多在日线和周线频率上操作，持有数天就调仓；长线资金以季度为单位。越是长线的资金，资金量越大，调仓时对走向的影响越强。</p>
<p>现在，你应该已经猜到了，有一<strong>部分资金会在日线RSI高点时撤出；大量的资金会在周线的RSI高点撤出；而更大量的资金会在月线的RSI高点撤出。</strong></p>
<p>但我猜<strong>没有资金会根据季线的RSI高点撤出</strong>。许多真理，都不能线性外推。</p>
<p>我这么说的原因是，<strong>季线资金会按照基本面来进行操作，而不是技术面</strong>。有的同学会拿基本面因子与技术面因子揉在一起，无论是多因子回归，还是机器学习，这都是不对的。它们只会相互打架、抵消。</p>
<p>所以，从现在起，你应该给你的股票上个闹钟，计算出它的日线、周线和月线RSI前期高点，然后实时监控这些指标。</p>
<p>一旦三者都达到高点，这轮行情就结束了。如果月线达到高点，日线和周线不在高位，但发生过顶背离，那么，势必在高位产生过滞胀（量在堆积，但上涨幅度不大），此时主力的筹码很多已经被交换掉了。</p>
<p>此时不走很危险。接下来的回调时间，可能以月计。老胡说，“我不割肉，你怎么割我？”但胡锡进终究是等不到那一天。</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-23 00:00:00">2024年4月23日</time></li>
        
          <li class="md-meta__item">
            分类于
            
              <a href="category/strategy/" class="md-meta__link">strategy</a></li>
        
        
          
          <li class="md-meta__item">
            
              需要 4 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="xgboost"><a class="toclink" href="2024/04/23/ml-predict-peaks-valley-1/">机器学习(XgBoost）预测顶和底</a></h2>
<p>之前的文章中，我们对中证1000指数进行了顶和底的标注。这一篇我们将利用这份标注数据，实现机器学习预测顶和底，并探讨一些机器学习的原理。</p>
<p>我们选取的特征非常简单--上影线和WR（William's R）的一个变种。选取这两个因子，是基于东吴证券高子剑在2020年6月的一份研报:<a href="/assets/ebooks/东吴证券-上下影线，蜡烛好还是威廉好.pdf">上下影线，蜡烛好还是威廉好？</a>。</p>
<p>他们的结论是，根据这两类指标的变种得到的综合因子，在2009到2020年4月，以全A为样本，进行5组分层多空测试，得到<strong>年化收益为15.86%，最大回撤仅为3.68%</strong>，可以说具有非常明显的信号意义。</p>
<hr />
<div class="admonition info">
<p class="admonition-title">Info</p>
<p><img alt="L33" src="https://images.jieyu.ai/images/2024/04/tqchen.jpg" />
在这次实验中，我们将使用XgBoost。</p>
<p>它的开发者是陈天奇，上海交大ACM班06级毕业，华盛顿大学博士。现任卡内基.梅隆大学助理教授。</p>
<p>除了XgBoost，他还是MXNet的开发者，这个框架是一度与Tensorflow, Pytorch等齐名的四大深度学习框架之一。
<br><br>
题图即为卡内基.梅隆大学校园。陈天奇现在任教于此。</p>
</div>
<p>在上一篇文章中，我们提到机器学习总是把要解决的问题归类为两类，一类是回归，一类是分类。如果要预测的target取值处在连续实数域上，这往往是个回归问题；如果target的值域为有限个离散状态，则是一个分类问题。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/04/regression-vs-classification.jpg" /></p>
<p>然而，具体问题总是复杂许多。初学者会觉得，既然股价的取值是在连续实数域上，因此可以把它看成回归问题，使用类似LSTM之类的神经网络来预测股价。但实际上由于金融数据的噪声问题，这么做并没有什么道理。</p>
<p>很可能只有在<strong>构建资产定价模型时，才可以当成回归来处理</strong>，也就是，根据公司的基本面和宏观经济指标来确定公司的市值，进而推算出股价。这本质上跟预测落杉叽的房价是同样的问题。</p>
<p>如果我们要构建时序方向上的预测信号呢？很可能只能用我这里的方法，不去预测每一个bar的涨跌和价格，而是改为预测顶和底，最终实现买在底部，卖出在顶部。</p>
<h3 id="xgboost_1"><a class="toclink" href="2024/04/23/ml-predict-peaks-valley-1/#xgboost_1">安装XgBoost</a></h3>
<p>我们一般通过conda来安装它的Python包，但pip（需要版本在21.3以上）也是可以的。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>py-xgboost
</code></pre></div></td></tr></table></div>
<p>在Windows上安装时，还需要额外安装VC的分发包。</p>
<p>如果你的机器安装有支持cuda的GPU，那么conda会自动安装带GPU支持的xgboost。</p>
<p>不过，GPU对xgboost的加速并没有对CNN这样的神经网络那么明显。也就是说，即使有GPU，xgboost也只会在某些阶段利用到GPU加速，总体上可能会快几倍而已。考虑到我们的标注数据本身比较小，这个加速并不重要。</p>
<h3 id="_1"><a class="toclink" href="2024/04/23/ml-predict-peaks-valley-1/#_1">数据构造</a></h3>
<p>经过顶底数据标注之后，我们已经获得了一份如下格式的数据:</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/04/label-data-example.jpg?1" /></p>
<p>这份数据包括了标签（即flag一列），但没有我们要的特征工程数据。因此，我们要先从OHLC数据中提取出特征。</p>
<p>我们决定先从最简单的特征提取--上影线和WR（William's R）的一个变种。选取这两个因子，是基于东吴证券高子剑在2020年6月的一份研报:<a href="/assets/ebooks/东吴证券-上下影线，蜡烛好还是威廉好.pdf">上下影线，蜡烛好还是威廉好？</a>。</p>
<p>他们的结论是，根据这两类指标的变种tr得到的综合因子，在2009到2020年4月，以全A为样本，进行5组分层多空测试，得到<strong>年化收益为15.86%，最大回撤仅为3.68%</strong>，可以说具有非常明显的信号意义。</p>
<p><img alt="66%" src="https://images.jieyu.ai/images/2024/04/东吴证券-ubl-因子表现.jpg" /></p>
<p>基于这个基础，我们改用机器学习的方法来做一遍。我们用来提取上下影线和WR的方法如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">wr_up</span><span class="p">(</span><span class="n">bars</span><span class="p">):</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;high&quot;</span><span class="p">],</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;low&quot;</span><span class="p">],</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span>
    <span class="n">shadow</span> <span class="o">=</span> <span class="n">h</span> <span class="o">-</span> <span class="n">c</span>

    <span class="c1"># 技巧：避免产生除零错误，且不影响结果正确</span>
    <span class="k">return</span> <span class="n">shadow</span><span class="o">/</span><span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="n">l</span> <span class="o">+</span> <span class="mf">1e-7</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">wr_down</span><span class="p">(</span><span class="n">bars</span><span class="p">):</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;high&quot;</span><span class="p">],</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;low&quot;</span><span class="p">],</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span>
    <span class="n">shadow</span> <span class="o">=</span> <span class="n">c</span> <span class="o">-</span> <span class="n">l</span>
    <span class="k">return</span> <span class="n">shadow</span><span class="o">/</span><span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="n">l</span> <span class="o">+</span> <span class="mf">1e-7</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">upper_shadow</span><span class="p">(</span><span class="n">bars</span><span class="p">):</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;high&quot;</span><span class="p">],</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;low&quot;</span><span class="p">],</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span>
    <span class="n">o</span> <span class="o">=</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;open&quot;</span><span class="p">]</span>
    <span class="n">shadow</span> <span class="o">=</span> <span class="n">h</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">shadow</span><span class="o">/</span><span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="n">l</span> <span class="o">+</span> <span class="mf">1e-7</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">lower_shadow</span><span class="p">(</span><span class="n">bars</span><span class="p">):</span>
    <span class="n">h</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;high&quot;</span><span class="p">],</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;low&quot;</span><span class="p">],</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span>
    <span class="n">o</span> <span class="o">=</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;open&quot;</span><span class="p">]</span>
    <span class="n">shadow</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">-</span> <span class="n">l</span>
    <span class="k">return</span> <span class="n">shadow</span><span class="o">/</span><span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="n">l</span> <span class="o">+</span> <span class="mf">1e-7</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>xgboost是基于树模型的，对数据的正则化本来没有要求，不过，为了便于分析和对比，我们对这四个指标都进行了归一化处理，使得数据的取值都在[0,1]之间。</p>
<p>如果是上下影线，值为0.5时，表明影线占了当天振幅的一半高度。如果为1，则当天收T线或者倒T(也称为墓碑线)。</p>
<p>William's R 是美国作家（不要脸一下，就是博主这一类型）、股市投资家拉里.威廉在1973年出版的《我如何赚得一百万》中首先发表的一个振荡类指标，它的公式是：</p>
<div class="arithmatex">\[
W\%R = \frac{H_n - C_n}{H_n - L_n} x 100\%
\]</div>
<p>计算向下支撑的公式略。</p>
<p>n是区间长度，一般设置为14天。这样<span class="arithmatex">\(H_n\)</span>即为14天以来的最高价。其它变量依次类推。如果我们把n设置为1天，就回归成类似于上下影线的一个指标。</p>
<p>与K线上下影计算方法不同之处是，它只使用收盘价，而不是像上下影线那样，使用收盘价与开盘价的最大者（计算上影线时）或者最小者（计算下影线时）。</p>
<p>这里还有一些技巧，比如我们使用了numpy的ufunc之一, maximum来挑选开盘价和收盘价中的最大者。另一个显而易见的方法是：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">np</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">c</span><span class="o">&gt;</span><span class="n">o</span><span class="p">,</span> <span class="n">o</span><span class="o">&lt;</span><span class="n">c</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="p">,</span> <span class="n">o</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<p>但此处使用ufunc会得到加速。</p>
<p>接下来，我们就可以构建训练数据集了：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">raw</span><span class="p">[</span><span class="s2">&quot;flag&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span>
        <span class="p">(</span><span class="n">wr_up</span><span class="p">(</span><span class="n">bars</span><span class="p">),</span> 
         <span class="n">wr_down</span><span class="p">(</span><span class="n">bars</span><span class="p">),</span> 
         <span class="n">upper_shadow</span><span class="p">(</span><span class="n">bars</span><span class="p">),</span> 
         <span class="n">lower_shadow</span><span class="p">(</span><span class="n">bars</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>bars是numpy structured array, 包含了OHLC数据和flag，由之前的raw变量转换过来。</p>
<p>最终我们生成了一个字典，训练数据存放在"data"下，标签数据存放在"label"下。使用了np.vstack来将特征合并起来。这些函数在《量化交易中的Numpy与Pandas》课程中有讲解。</p>
<p>接下来，我们引入sklearn的中的方法，将上述数据集切分为训练集和测试集，然后进行训练：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>

<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> 
                <span class="n">train_test_split</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">.2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>我们保留了20%的数据作为测试数据。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">bst</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">learning_rate</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="c1"># fit model</span>
<span class="n">bst</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="c1"># make predictions</span>
<span class="n">preds</span> <span class="o">=</span> <span class="n">bst</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>现在，训练完成，并且我们在测试数据集上进行了预测。接下来，我们希望知道这个模型的有效性。为此我们要引入sklearn.metrics中的一些度量方法：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">acc</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">preds</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ACC: </span><span class="si">{</span><span class="n">acc</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">recall</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">preds</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">&#39;weighted&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Recall:</span><span class="si">{</span><span class="n">recall</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">f1</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">preds</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">&#39;weighted&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;F1-score: </span><span class="si">{</span><span class="n">f1</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">pre</span> <span class="o">=</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">preds</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">&#39;weighted&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Precesion:</span><span class="si">{</span><span class="n">pre</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">mx</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">preds</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>我们得到的结果看上去很完美：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>ACC:<span class="w"> </span><span class="m">0</span>.930
Recall:93.0%
F1-score:<span class="w"> </span><span class="m">89</span>.6%
Precesion:86.5%
</code></pre></div></td></tr></table></div>
<p>但是，这些数据能表明模型真的有效吗？幸福会不会来得太容易？所以，我们还得往下深挖一层，看看实际的预测效果究竟如何。在分析大量样本预测结果时，我们有一个利器，称为困惑矩阵（confusion matrix）。</p>
<hr />
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>关于confusion，有这样一则笑话。在一个选美比赛上，一位美女被要求解释孔子（Confucius）的名言:"Reading without meditating is a useless occupation (学而不思则惘)"。显然这位美女不知道Confucius是谁，于是，她望文生义地猜测， Confucius was one of the men who invented confusion。不过，中庸有时候确实让人confused，猜测孔夫子发明了困惑，也是歪打正着。</p>
</div>
<p>我们要将矩阵mx可视化。人类，无论男人还是女人，都是视觉动物。我们无可救药地偏好各种色图。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">mx</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">mx</span><span class="p">),</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;YlGnBu&quot;</span><span class="p">,</span> 
            <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.1%&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>我们会得到这样一张图：</p>
<p><img alt="50%" src="https://images.jieyu.ai/images/2024/04/confustion-matrix.jpg" /></p>
<p>这张图表明：大约有3.8%的0类数据，被错误分类为标签1；大约有3.2%的2类数据，被错误地分类为标签1；所有的1类数据，都正确地分类为1。</p>
<p>从这张图我们还可以知道，这是一个严重有偏的数据集。但我们最为关注的第0类（对应于flag = -1）和第2类（对应于flag = 1），它没能正确识别。当然，它也没错到把第0类识别为第2类，或者相反。</p>
<p>不过，无论如何，我们有了一个好的开端。随着我们往训练数据里加入更多的数据行、更多的特征，并且使得数据按类别均匀分布后，这个模型一定会有提升。</p>
<p>不过，在改进之前，我们还需要掌握更多关于xgboost及评估指标的理论知识。下期见！</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-22 00:00:00">2024年4月22日</time></li>
        
          <li class="md-meta__item">
            分类于
            
              <a href="category/strategy/" class="md-meta__link">strategy</a></li>
        
        
          
          <li class="md-meta__item">
            
              需要 2 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="_1"><a class="toclink" href="2024/04/22/why-low-volatility-factor-win/">新国九条下，低波动因子重要性提升！</a></h2>
<p><em>Robert (Bob) Haugen, 低波动因子之父。图片来自MarketWatch</em></p>
<p><br></p>
<p>之前我们有一期文章介绍了<strong>低换手率因子</strong>。它的背后的原理是，要买在<strong>无人问津处，藏器待时，最终卖在人声鼎沸时</strong>。这是一种博弈逻辑。</p>
<p>今天介绍的<strong>低波动因子</strong>，同样强调无人问津处的价值。由于它的低波动特性，在实操上，不受短线资金青睐；在学术上，它与CAPM、EMH等流行的理论相悖，因而甫一提出，就被华尔街和学术界视为异类。直到2008年，MSCI才开始涉及这一因子，编制了MSCI全球低波动率指数。</p>
<p>大量的实证研究表明，<!--比如Pim van Vliet博士（他在荷兰管理一家共同基金）与MSCI的全球低波动指数都证明，-->在长达数十年的投资史中，低波动率因子都具有明显的优势：<strong>人迹罕至的道路，有时提供更好的旅程</strong>。</p>
<p><strong>新国九条之后，红利股在投资中的重要性将大大加强</strong>，而低波动因子在发现红利股、白马股方面有优秀的选择能力。这是我们介绍低波动因子的时间背景。</p>
<!--这篇文章除了从学术的角度，起底围绕低波动率的学术之争之外，也将介绍低波动率因子的优秀的历史实证表现、以及如何构建低波动率因子票池并进行优化。-->

<!--
历史故事
低波动率选股
淘汰向下的股
-->

<h3 id="_2"><a class="toclink" href="2024/04/22/why-low-volatility-factor-win/#_2">低波动因子的数据表现</a></h3>
<p>从CAPM模型发表以来，华尔街和学术界坚信风险与回报是紧密相连的：市场是有效的，投资者要获得较高的收益，就必须承担更多的风险。</p>
<p>然而，Robert Haugen和他的老师 James Heins 教授在60~70年代就发现，与流行的理论相反，低风险股票实际上能产生更高的回报。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Robert Haugen, 金融经济学家、量化投资和低波动性投资领域先驱。伊利诺伊大学-香槟分校金融经济学博士，教授。</p>
</div>
<p>Haugen认为，有关投资和公司金融的重要教科书“大错特错，需要重写”。由于Haugen对低波动因子的大力推崇，从而获得了“低波动性投资之父”的非正式称号。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>查理.芒格也对现代金融理论报有类似的观点。他曾经讥讽地说，一些把现代金融理论鼓吹得头头是道的诺奖经济学家，不得不把自己管理的基金破产，转而投资伯克希尔.哈撒韦。</p>
</div>
<p>根据S&amp;P Global的Tim Edwards博士等人的研究，低波动性指数的风险调整回报在多个国家的表现都超过了母指数，在日本甚至超出近一倍。这个对比图我们不放了，放一个累积收益对比图。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/04/s&amp;p-low-vol-vs-market.jpg" />
<cap>数据来源于S&amp;P Dow Jones Indices, 1990~2018</cap></p>
<p>这个图是低波动因子标的池与市场（标普500）历史累积回报相对比的一个图。从图中可以看出，几乎在任何一个时期，低波动因子的总体收益（而不仅仅是风险调整收益）都超过了市场表现。</p>
<p>他们的构建方法是，从标普500中，挑出波动率最低的20%，并按与波动率成反比的方式进行加权，并且每季度进行一次调仓。</p>
<p>这份研究报告是教育性质的，在<a href="/assets/ebooks/education-low-volatility-a-practitioners-guide.pdf">jieyu.ai</a> 上提供了免费下载。</p>
<p>MSCI在去年三季度的一篇文章中，披露了他们构建的低波动性指数的表现情况：</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/04/msci-low-vol.jpg" />
<cap>图表来源：MSCI网站</cap></p>
<p>上图显示出，低波动因子在市场衰退期反而能逆市上涨，其它多数时间也跑赢指数。</p>
<h3 id="_3"><a class="toclink" href="2024/04/22/why-low-volatility-factor-win/#_3">低波动因子的有效性解释</a></h3>
<p>关于低波动性因子有效的原因，学界也是用了很多数学和数据来解释。但实际上，回到问题的本原上来，低波动性是如何造成的？是由于它的投资者长期看好公司，并且以持有吃分红为主，很少交易造成的。</p>
<p>投资者为什么会长期看好一支股票呢？是因为这些公司的业务逻辑很简单（能看懂，所以投资者不会反反复复）、护城河深（竞争格局很难改变）、盈利足够好（核心还是要能赚钱），是那些<strong>世界无法改变的公司</strong>（摘自<strong>但斌</strong>近期路演）。</p>
<p>这就有点价值投资的味道了。实际上，学界有人做了很多研究，最后发现，低波动因子与价值因子有较强的关联性：低波动性的股票、往往也是低市净率的股票。因此，白马股、长期红利股，也往往是低波动率的个股。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>既然低波动因子与价值因子强关联，如果一个市场里的财务数据不那么可靠，那么我们就应该使用低波动因子来代替。量价数据永远不说谎。如果一家过去看起来很好的公司，最近出了问题，看财报的人永远是最后一个知道的。但股价会提前反映。</p>
</div>
<p>一个有趣的事实是，夏普率与波动率的关系。夏普率是一种风险调整收益率，它的分母--资产收益的标准差，正是波动率的线性函数。</p>
<p>夏普率的提出者，正是CAPM理论的创始人威廉.夏普。而低波动率投资方法的支持者们，正是用低波动率作为武器，举起了反抗以CAPM为代表的现代金融理论的旗帜。如此说来，夏普在发表CAPM模型时，也为这一理论安排了自己的掘墓人。这很辩证法。</p>
<h3 id="_4"><a class="toclink" href="2024/04/22/why-low-volatility-factor-win/#_4">波动率的计算</a></h3>
<p>根据investopedia，波动率的公式是:</p>
<div class="arithmatex">\[
vol = \sqrt{var(R)}/T
\]</div>
<p>这里的T是产生回报率R的周期数。但也有不除以T的做法。</p>
<p>在金融领域，波动率常以年化方式进行呈现和比较。这可以用pandas来计算:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">bars</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">close</span> <span class="o">=</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span>

<span class="n">close</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window_size</span><span class="p">)</span>
     <span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="mi">252</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>在进行单因子检验时，我们需要求得每一天的标的的波动率，因此会需要这里的rolling版本。</p>
<p>或者，更简单地，使用quantpian的开源库empyrical:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">empyrical</span> <span class="kn">import</span> <span class="n">annual_volatility</span>

<span class="n">daily_returns</span> <span class="o">=</span> <span class="n">close</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span>
<span class="n">annual_volatility</span>
</code></pre></div></td></tr></table></div>
<h3 id="_5"><a class="toclink" href="2024/04/22/why-low-volatility-factor-win/#_5">低波动率策略</a></h3>
<p>一般而言，我们无须自行检验低波动率因子的有效性，可以直接使用它来进行选股。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>由于低波动率因子的特性，要检验它，必须要跨越至少一个牛熊经济周期，这样引入的数据量非常大。对A股来讲，我们每天不一样，因此还很难说走过了多少个经济周期。</p>
</div>
<p>要注意的是，如果我们以短期的波动率进行选股，非常有可能选中下跌状态中的个股。下图显示了相同的波动率，可以出现完全不同的股价走势：</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/04/same-vol-different-trend.jpg" /></p>
<p>在低波动率条件下，判断股价走势非常容易，我们对价格进行回归，如果得到的直线斜率大于0，则走势是向上的。</p>
<p>这里的关键点是，我们首先要使用<strong>月线，至少24个周期以上</strong>。在较短的周期上，低波动率的背后没有经济学上的意义支撑。主要代码如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">for</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">get_secs</span><span class="p">():</span>
    <span class="n">bars</span> <span class="o">=</span> <span class="n">get_bars</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bars</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">24</span><span class="p">:</span>
        <span class="k">continue</span>

    <span class="n">close</span> <span class="o">=</span> <span class="n">bars</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">24</span><span class="p">:]</span>
    <span class="n">returns</span> <span class="o">=</span> <span class="n">close</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">/</span><span class="n">close</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="c1"># 计算波动率</span>
    <span class="n">vol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">returns</span><span class="p">)</span>

    <span class="c1"># 计算斜率</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span> <span class="n">close</span><span class="o">/</span><span class="n">close</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">degree</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">name</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">vol</span><span class="p">,</span> <span class="n">a</span><span class="p">))</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;vol&quot;</span><span class="p">,</span> <span class="s2">&quot;slope&quot;</span><span class="p">])</span>

<span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">slope</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nsmallest</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;vol&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>这样我们就选出了趋势向上，波动率最小的10支。当slope接近0时，实际上还不能认为趋势向上，所以，我们可以通过分位数来进行筛选：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">quant_25</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">slope</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">slope</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">slope</span> <span class="o">&gt;</span> <span class="n">quant_25</span><span class="p">]</span><span class="o">.</span><span class="n">nsmallest</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;vol&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="_6"><a class="toclink" href="2024/04/22/why-low-volatility-factor-win/#_6">结束语</a></h3>
<p>人迹罕至的道路，有时提供更好的旅程。<strong>新国九条之后，红利股在投资中的重要性将大大加强</strong>，而低波动因子在发现红利股、白马股方面有优秀的选择能力。如果一个市场里的财务数据不那么可靠，那么我们就应该使用低波动因子来代替价值因子。<strong>量价数据永远不说谎</strong>。如果一家过去看起来很好的公司，最近出了问题，看财报的人永远是最后一个知道的。但股价会提前反映。</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-19 00:00:00">2024年4月19日</time></li>
        
          <li class="md-meta__item">
            分类于
            
              <a href="category/tools/" class="md-meta__link">tools</a></li>
        
        
          
          <li class="md-meta__item">
            
              需要 3 分钟阅读时间
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="dont-fly-solo-ai"><a class="toclink" href="2024/04/19/do-not-fly-solo-use-a-pilot/">Don't fly solo! 量化人如何使用AI工具</a></h2>
<p>在投资界，巴菲特与查理.芒格的神仙友谊，是他们财富神话之外的另一段传奇。巴菲特曾这样评价芒格：他用思想的力量拓展了我的视野，让我以火箭的速度，从猩猩进化到人类。</p>
<p>人生何幸能得到一知己。如果没有这样的机缘，在AI时代，至少我们做量化时，可以让AI来伴飞。</p>
<p>这篇文章，分享我用AI的几个小故事。</p>
<hr />
<p>在讲统计推断方法时，需要介绍分位图（Quantile-Quantile Plot）这种可视化方法人类天生就有很强的通过视觉发现pattern的能力，所以介绍这种可视化方法几乎是不可缺少的。</p>
<p><img alt="" src="https://images.jieyu.ai/images/2023/07/lesson12-qq-plot-0.png" />
<cap>左偏、正态和右偏分布的QQ图示例</cap></p>
<p>但当时在编这部分教材时，我对QQ-plot的机制还有一点不太清晰：为什么要对相比较的两个随机变量进行排序，再进行绘图？为什么这样绘图如果得到的是一条直线，就意味着两个随机变量强相关？难道不应该是按随机变量发生的时间顺序为序吗？</p>
<h3 id="gpt-4"><a class="toclink" href="2024/04/19/do-not-fly-solo-use-a-pilot/#gpt-4">启用GPT-4的多角色数据科学家扮演</a></h3>
<p>这个问题无人可请教，哪怕我搜遍全网。后来，即使我通过反复实验和推理，已经明白了其中的道理，但毕竟这个知识点似乎无人提及过，心里多少有点不确定。于是，我请教了GPT-4。</p>
<hr />
<p>最初的几次尝试没有得到我想要的结论，于是，我用了一点技巧，要求GPT-4把自己想像成为数据科学家。并且，为了避免错误，我使用了三个数据科学家进行角色扮演，让A和B分别提出观点，再让C来进行评论，这一次，我得到了非常理想的结果，即使请教人类专家可能亦不过如此。</p>
<p>先给GPT-4提供问题背景：</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>Q-Q图的原理是，如果X是一个有序数据集，那么[X, X]在二维平面上的图像一定是一条45度角的直线。</p>
<p>如果我们有随机变量X和设想中的理论分布Y，如果随机变量X服从估计中的理论分布Y，那么就应该有：</p>
<p>在50%分位处，X的采样点<span class="arithmatex">\(x_1\)</span>应该与50%分位处的<span class="arithmatex">\(y_1\)</span>非常接近（由于是随机变量，所以也很难完全相等）；在25%分位处，75%分位处，或者进一步推广，在任意分位数处，两者的采样都非常接近。</p>
<p>在实际绘图中，我们的做法是，假设X服从正态分布，共有n个数据，我们先对X进行z-score变换，然后从标准正态分布中，也随机抽样取n个数，记为Y，对两个数组都进行排序后，对[X, Y]进行绘图，如果它的图形接近于直线，则说明X服从正态分布。</p>
</div>
<p>从背景可以看出，我已经掌握了QQ图的大致原理。如果X与Y是同分布的，那么，将X,Y排序后，分别以<span class="arithmatex">\([I,X]\)</span>和<span class="arithmatex">\([I,Y]\)</span>（<span class="arithmatex">\(I\)</span>为数组坐标）为点绘制的曲线，将会是相似曲线。</p>
<hr />
<p>但QQ图将其进行了变换，直接取每一个坐标<span class="arithmatex">\(I_i\)</span>对应的<span class="arithmatex">\(X_i\)</span>和<span class="arithmatex">\(Y_i\)</span>作为曲线的坐标，从而将只绘制出一条曲线。如果二者同分布，则该曲线将是一条直线。当时我对这个变换的性质还不太了解。</p>
<p>我的问题一共有4个：</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<ol>
<li>这段话中是否有事实错误？</li>
<li>如果不对X进行z-score化，这样[X,Y]还会是直线吗？</li>
<li>n值对绘制图形的影响是？</li>
<li>假设X确实服务正态分布，从标准正态分布中进行抽样得到的Y，是如何保证它与X一一对应的？</li>
</ol>
</div>
<p>最后一问，实际上就是要问这个变换为什么能成立。</p>
<p>GPT-4的角色 -- 数据科学家A发现了背景中第一段的一个错误。<span class="arithmatex">\([X,X]\)</span>的图像为45度直线的条件并不需要<span class="arithmatex">\(X\)</span>是有序的。任何数据集的<span class="arithmatex">\([X,X]\)</span>图像都会是45度直线（显然）。对于第2问，A的回答是：</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>If we don't standardize X (i.e., perform a z-score transformation), the Q-Q plot may not form a 45-degree line. The reason we standardize is to put X and Y on the same scale, which makes it easier to compare them.</p>
</div>
<hr />
<p>对于第三问，数据科学家A认为：</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>The number of data points (n) can affect the Q-Q plot in terms of its granularity. The more points we have, the smoother and more precise the plot will be. However, even with a small n, if the data follows the theoretical distribution, the points should still fall roughly along the line of equality.</p>
</div>
<p>n只影响图像的平滑度和我们判断时的精度。这一点非常准确。但我最关注的是第四位，随机变量X与Y究竟是如何对应的，为什么可以将它们按大小排序？A的回答是：</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>Y, sampled from a standard normal distribution, does not necessarily correspond one-to-one with X in terms of specific data points. Instead, it corresponds to X in terms of the order of data points. When we sort X and Y, the smallest value of X is paired with the smallest value of Y, the second smallest with the second smallest, and so on.</p>
</div>
<p>答案几乎已经呼之欲出了。即使两个随机变量服从同一分布，它们的值也不会相等，但是，出现在同一位置上的随机变量值，它们的差值会很小。因此，这样绘制出来的图，就是一条45度直线。</p>
<p>B和C主要是对A的结论进行质疑、比较，这里不赘述了。</p>
<hr />
<p>无论A、B还是C都没有给出最终的解释：为什么如果随机变量X和Y服从同一分步的话，那么在同一位置i处的<span class="arithmatex">\(X_i\)</span>和<span class="arithmatex">\(Y_i\)</span>应该是接近的。但它们确实证实了我们绘制QQ图之前，先对随机变量进行排序的思路是正确的。</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>关于这一点，应该从CDF/PPF的概念入手来理解。如果<span class="arithmatex">\(X\)</span>和<span class="arithmatex">\(Y\)</span>是同分布的，那么在任一分位<span class="arithmatex">\(i\)</span>上，随机变量的值（通过ppf，即cdf的逆函数来计算）都应该非常接近。而排序后的数组，其坐标天然就有了分位数的意义。既然<span class="arithmatex">\(X\)</span>与<span class="arithmatex">\(Y\)</span>在任一坐标<span class="arithmatex">\(i\)</span>上都应该接近，那么点<span class="arithmatex">\(X_i, Y_i\)</span>就应该落在直线<span class="arithmatex">\(y=x\)</span>上。这个变换的作用，是利用人眼对直线更为敏感的现象，把不易分辨的两条曲线相似度的检测，转换成一条曲线是否为直线的检测。<br><br>事实上，这一概念在英文wiki上解释的比较清楚。但我当时只看了中文的wiki。</p>
</div>
<p>如果上述概念还不好理解，我们可以再举一个更直观的例子。通过QQ图来判断两个证券标的是否存在强相关性。比如，我们以两支同行业个股为例，取它们最近250期日线，计算每日回报率，对其进行排序后绘图：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">r1</span> <span class="o">=</span> <span class="n">hchj</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">/</span><span class="n">hchj</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">xrhj</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">/</span><span class="n">xrhj</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>

<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">r1</span><span class="p">),</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">r2</span><span class="p">))</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">r1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">r1</span><span class="p">),</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">r1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">r1</span><span class="p">),</span> <span class="s2">&quot;x=x&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<hr />
<p>我们将得到如下的分位图：</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/04/hchj-vs-xrhj.jpg" /></p>
<p>这就非常直观地显示出，两支个股的走势确实相关：在涨幅4%以下的区域，如果A下跌，那么B也下跌，并且幅度都差不多；如果A上涨，那么B也上涨；幅度也差不多。这正是相关性的含义。这里我们排除了时间，只比较了两个随机变量即日收益率。</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>注意看这张图中涨幅大于4%的部分。它意味着，某个标的涨幅大于4%时，另一个标的的上涨幅度没有跟上。这里可能隐藏了潜在的机会。你知道该怎么分析吗？</p>
</div>
<hr />
<h3 id="copilot"><a class="toclink" href="2024/04/19/do-not-fly-solo-use-a-pilot/#copilot">跟着copilot学编程</a></h3>
<p>有两个版本的copilot。一个是copilot，另一个，现在被叫作github copilot，是vscode中的一个扩展。后者2022年中就发布了，当时有6个月的免费试用期。试用期内一炮而红，迅速开启了收费模式。这也直接导致了同年11月同赛道的工具软件Kite的退出。</p>
<p>现在github copilot每月$10，尽管物有所值，但作为不是每天都coding的人来说，感觉如果能推出按token付费的模式是最好了。</p>
<p>它的两个免费版本，一个是对学生免费。有edu邮箱的可以抓紧在github上申请下。另一个是如果你的开源项目超过1000赞，则有机会申请到免费版。</p>
<p>一般我使用copilot作为编程补充。它在错误处理方面可以做得比我更细腻，另外，在写单元测试用例时（建议每个量化人都坚持这样做），自动补齐测试数据方面是一把好手。</p>
<p>但是我没有想到的是，有一天它还能教我学编程，让我了解了一个从来没有听说过的Python库。</p>
<p>整个事情由ETF期权交割日引起。近年来似乎形成了这样一个规律，每逢期权交割日，A股的波动就特别大，而且以向下波动为主。因此，量化程序需要把这些交割日作为因子纳入交易体系。</p>
<hr />
<p>但是这些交割日的确定，出入意料地--<strong>难</strong>。它的规则是：</p>
<p>股指期货的交割日为每月的第三周周五；ETF期权交割日为每月第四周的周三；A50交割日为相关月的倒数第二个交易日。</p>
<p>在刚刚过去的4月19日，是一个股指期货交割日。接下来的4月24日，则是ETF交割日。今年的交割日如下：</p>
<p><img alt="" src="https://images.jieyu.ai/images/2024/03/交割日.jpg" /></p>
<hr />
<p>随手写了几行代码，发现这个日子还是比较难算的。于是打开copilot chat，问它：</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>股指期货的交割日为每月的第三周周五；ETF期权交割日为每月第四周的周三；A50交割日为相关月的倒数第二个交易日。</p>
<p>根据上述信息，写一个方法，求出2018年到2024年12月31日止的各个交割日。</p>
</div>
<p>Copilot并不知道股市日历，所以无法独立完成上述任务。这并不奇怪。令人惊喜地是，它使用了calendar.monthcalendar这个方法。尽管calendar是一个标准库，但我之前并不知道它还有这个用法。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">calendar</span>

<span class="n">calendar</span><span class="o">.</span><span class="n">monthcalendar</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><img alt="75%" src="https://images.jieyu.ai/images/2024/03/month-calendar.jpg" /></p>
<hr />
<p>在这个基础上改就容易多了。另一个有趣的例子，是让copilot帮我想函数名。</p>
<p>我喜欢使用这样一个因子，最近20天内，涨幅中位数与跌幅中位数的比率。显然，这个比值越大，说明做多的力量越强。</p>
<p>最初我使用caculate_ratio这个函数名。但几乎所有的因子计算都可以使用这个名字。因此，我让copilot给一个准确点的名字。copilot回答说，根据函数的功能，我们可以将函数名从calculate_ratio改为calculate_downward_exceeding_upward_median_ratio。这个名字更准确地描述了函数的功能：计算下跌幅度超过上涨中位数的比例。</p>
<p>不过，这个名字太长了，也不优雅。于是，我问copilot，名字可以再短一点吗？可以使用metaphore吗？Coplilot回答说：</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>当然可以。我们可以使用"bear_bull_ratio"作为函数名。这个名字较短，且使用了金融市场的术语"bear"和"bull"，分别代表市场下跌和上涨，这样可以更好地传达函数的含义。</p>
</div>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <span class="md-pagination__current">1</span> <a class="md-pagination__link" href="page/2/">2</a> <a class="md-pagination__link" href="page/3/">3</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="page/6/">6</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=zxYR3Hve6OMGLvEdgV4z_ONxcOF3hjMh&authKey=eoPjHqcwDIyiTQRNE6jGw1ReDajzXnGHtkAgwapdicr9n%2FPStD3FKit2miTi0zhC&noverify=0&group_code=578029127" target="_blank" rel="noopener" title="QQ群" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.zhihu.com/people/hbaaron" target="_blank" rel="noopener" title="知乎" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/zillionare" target="_blank" rel="noopener" title="Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto: aaron_yang@jieyu.ai" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.indexes", "navigation.tabs", "navigation.instant", "navigation.tabs.sticky"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.081f42fc.min.js"></script>
      
        <script src="../overrides/javascripts/course.js"></script>
      
        <script src="../overrides/javascripts/katex.js"></script>
      
        <script src="../overrides/javascripts/katex.min.js"></script>
      
        <script src="../overrides/javascripts/auto-render.min.js"></script>
      
    
  </body>
</html>