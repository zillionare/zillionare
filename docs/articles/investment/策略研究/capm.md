---
title: èµ„æœ¬èµ„äº§å®šä»·æ¨¡å‹
---

èµ„æœ¬èµ„äº§å®šä»·æ¨¡å‹ï¼ˆCAPMï¼‰æè¿°äº†èµ„äº§çš„é¢„æœŸå›æŠ¥ä¸å¸‚åœºç³»ç»Ÿé£é™©ä¹‹é—´çš„å…³ç³»ã€‚å®ƒç”±å¨å»‰. å¤æ™®ç­‰äººåœ¨ 1960 å¹´ä»£æå‡ºã€‚å¨å»‰. å¤æ™®è·å¾—äº† 1990 å¹´çš„è¯ºè´å°”ç»æµå­¦å¥–ã€‚CAPM è¢«è®¤ä¸ºæ˜¯ç»æµå­¦çš„ä¸ƒä¸ªåŸºæœ¬ç†è®ºä¹‹ä¸€ã€‚

CAPM è¡¨ç¤ºèµ„äº§çš„é¢„æœŸæ”¶ç›Šç­‰äºæ— é£é™©æ”¶ç›ŠåŠ ä¸Šé£é™©æº¢ä»·ã€‚ CAPM çš„å‡è®¾æ˜¯æŠ•èµ„è€…æ˜¯ç†æ€§çš„ï¼Œå¸Œæœ›è·å¾—æœ€å¤§åŒ–å›æŠ¥å¹¶å°½å¯èƒ½é™ä½é£é™©ã€‚å› æ­¤ï¼ŒCAPM çš„ç›®æ ‡æ˜¯è®¡ç®—ç›¸å¯¹äºæ— é£é™©åˆ©ç‡çš„ç»™å®šé£é™©æº¢ä»·ï¼ŒæŠ•èµ„è€…å¯ä»¥é¢„æœŸè·å¾—çš„å›æŠ¥ã€‚

## åŸºæœ¬æ¦‚å¿µ

### Risk-Free Rateï¼ˆæ— é£é™©åˆ©ç‡ï¼‰

å½“æŠ•èµ„è€…å†³å®šä¹°å…¥è‚¡ç¥¨ç­‰é«˜é£é™©èµ„äº§æ—¶ï¼Œä»–çš„ç›®çš„æ˜¯ä¸ºäº†è·å¾—é«˜äºæ— é£é™©èµ„äº§çš„æ”¶ç›Šã€‚ä¸€èˆ¬è®¤ä¸ºï¼Œé“¶è¡Œå­˜æ¬¾åˆ©ç‡å’Œå›½å€ºæ”¶ç›Šç‡éƒ½æ˜¯æ— é£é™©çš„ã€‚ä¸è¿‡ï¼Œä¸€èˆ¬åŒæœŸçš„å›½å€ºæ”¶ç›Šç‡ä¼šé«˜äºåŒæœŸé“¶è¡Œå­˜æ¬¾ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸¸æŠŠå›½å€ºæ”¶ç›Šç‡å½“æˆæ— é£é™©åˆ©ç‡ã€‚ä¸åŒæœŸé™çš„å›½å€ºåˆ©ç‡æ”¶ç›Šä¸åŒï¼Œä¸€èˆ¬å¯¹æ ‡æ—¶ï¼Œä½¿ç”¨ä¸é£é™©èµ„äº§é¢„æœŸæŠ•èµ„æ—¶é—´ç›¸åŒå°±å¥½ã€‚æ¯”å¦‚ï¼Œå¦‚æœæ˜¯æµåŠ¨æ€§å¥½çš„è‚¡ç¥¨ï¼Œä¹Ÿä¸æ‰“ç®—é•¿æœŸæŒæœ‰ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€å¹´æœŸå›½å€ºåˆ©ç‡ä½œä¸ºæ— é£é™©åˆ©ç‡ã€‚å¦‚æœæ˜¯ä¸åŠ¨äº§ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ 5 å¹´æœŸå›½å€ºåˆ©ç‡ä½œä¸ºå¯¹æ ‡çš„æ— é£é™©åˆ©ç‡ã€‚

å¦‚ä½•è·å–å›½å€ºåˆ©ç‡å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ akshare:

```python
import akshare as ak
import arrow
import numpy as np
import random
import pandas as pd

random.seed(78)

now = arrow.now()
start = now.shift(years=-1)
end = f"{now.year}{now.month:02d}{now.day:02d}"
start = f"{start.year}{start.month:02d}{start.day:02d}"

bond = ak.bond_china_yield(start_date=start, end_date=end)
bond.set_index(keys='æ›²çº¿åç§°', inplace=True)
bond
```
è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†è¿‘ä¸€å¹´çš„å„ç§å€ºåˆ¸æ”¶ç›Šç‡ã€‚æˆ‘ä»¬å¯ä»¥æŠŠâ€œä¸­å€ºå›½å€ºæ”¶ç›Šç‡æ›²çº¿â€ä¸€å¹´æœŸçš„å¹³å‡å€¼å½“ä½œä¸€å¹´æœŸå›½å€ºæ”¶ç›Šï¼š

```python
rf = bond[bond.index=='ä¸­å€ºå›½å€ºæ”¶ç›Šç‡æ›²çº¿']['1å¹´'].mean()
print(rf)

rf = rf / 100
```
è¾“å‡ºæ˜¯ 2.06ã€‚è¿™ä¸ªå€¼åº”è¯¥è§£è¯»ä¸º 2.06%ã€‚

### å¸‚åœºå›æŠ¥ $r_m$

å¸‚åœºå›æŠ¥ç‡è¡¨ç¤ºä¸º$r_m$ ï¼ŒåŒ…æ‹¬å¸‚åœºä¸Šçš„æ‰€æœ‰è¯åˆ¸ã€‚ä½†ä¸€èˆ¬æˆ‘ä»¬åªä½¿ç”¨æŸäº›æŒ‡æ•°ï¼Œæ¯”å¦‚ä¸Šè¯ 50ï¼Œæ²ªæ·± 300ã€‚å¦‚æœæŠ•èµ„åå¥½æˆé•¿è‚¡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸­è¯ 1000ã€‚

### ğ›½ è´å¡”
ğ›½ æ˜¯è¡¡é‡è‚¡ç¥¨ç›¸å¯¹äºæ•´ä½“å¸‚åœºï¼ˆä¾‹å¦‚æ²ªæ·± 300 æŒ‡æ•°ï¼‰æ³¢åŠ¨æ€§çš„æŒ‡æ ‡ã€‚æ¢å¥è¯è¯´ï¼Œğ›½ ä»£è¡¨å›å½’çº¿çš„æ–œç‡ï¼Œå³å¸‚åœºå›æŠ¥ä¸ä¸ªè‚¡å›æŠ¥çš„å…³ç³»ã€‚

CAPM ä¸­ä½¿ç”¨ ğ›½ æ¥æè¿°ç³»ç»Ÿé£é™©æˆ–å¸‚åœºé£é™©ä¸èµ„äº§é¢„æœŸå›æŠ¥ä¹‹é—´çš„å…³ç³»ã€‚æ ¹æ®å®šä¹‰ï¼Œæˆ‘ä»¬è¯´æ•´ä¸ªå¸‚åœºçš„è´å¡”å€¼ä¸º 1.0ï¼Œä¸ªè‚¡æ ¹æ®å…¶ç›¸å¯¹äºå¸‚åœºçš„æ³¢åŠ¨ç¨‹åº¦è¿›è¡Œæ’åã€‚

* å¦‚æœä¸ªè‚¡çš„ Beta = 1.0ï¼Œè¿™æ„å‘³ç€å…¶ä»·æ ¼ä¸å¸‚åœºå®Œå…¨ç›¸å…³
* å¦‚æœ Beta < 1.0ï¼ˆç§°ä¸ºâ€œé˜²å¾¡æ€§â€ï¼‰ï¼Œè¿™è¡¨æ˜è¯¥è¯åˆ¸ç†è®ºä¸Šçš„æ³¢åŠ¨æ€§ä½äºå¸‚åœº
* å¦‚æœ Beta > 1.0 æˆ–â€œæ¿€è¿›â€ï¼Œåˆ™è¡¨æ˜èµ„äº§ä»·æ ¼æ¯”å¸‚åœºæ³¢åŠ¨æ›´å¤§

## CAPM å…¬å¼

è¯¥å…¬å¼å®šä¹‰å¦‚ä¸‹ï¼š

$$
r_i = r_f + \beta(r_m - r_f)
$$

è¿™é‡Œï¼š
* $r_i$æ˜¯è¯åˆ¸ï¼ˆä¸ªè‚¡ï¼‰çš„é¢„æœŸå›æŠ¥
* $r_f$æ˜¯æ— é£é™©åˆ©ç‡
* $\beta_i$æ˜¯è¯åˆ¸ç›¸å¯¹äºå¸‚åœºçš„ğ›½å€¼
* $r_m - r_f$è¢«ç§°ä¸ºé£é™©æº¢ä»·

æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è§£è¯»è¿™ä¸ªå…¬å¼ã€‚å¦‚æœæ ‡æ™® 500 çš„æ•´ä½“å›æŠ¥ç‡æ˜¯ 12.4%ï¼Œæ— é£é™©ç‡åˆ©ç‡ä¸º 0%ï¼Œè€Œ APPL çš„ğ›½ä¸º 1.1 çš„è¯ï¼Œåˆ™æŠ•èµ„è€…ä¹°å…¥ APPLï¼Œä»–æœŸæœ›è·å¾— 13.7%çš„å›æŠ¥ï¼Œä»¥è¡¥å¿æ‰¿æ‹…çš„é¢å¤–é£é™©ã€‚

è¦ä½¿ç”¨ CAPM æ¨¡å‹ï¼Œæ ¸å¿ƒæ˜¯è®¡ç®—ä¸ªè‚¡ç›¸å¯¹äºå¸‚åœºç»„åˆï¼ˆæŒ‡æ•°ï¼‰çš„ğ›½ã€‚ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡ Python æ¥è¿›è¡Œå®ç°ã€‚

## åŸºäº Python çš„ CAPM å®ç°

æˆ‘ä»¬ä½¿ç”¨çš„å¸‚åœºç»„åˆæ˜¯æ²ªæ·± 300ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿè¦ä»ä¸­æŠ½å–ä¸ªè‚¡ã€‚æˆ‘ä»¬å°†éšæœºæŠ½å– 10 æ”¯ä¸ªè‚¡æ¥è¿›è¡Œè®¡ç®—ã€‚

### è·å–æ•°æ®

ä¸ºäº†ç¡®ä¿æ‰€æœ‰äººéƒ½èƒ½æ‹¿åˆ°æ•°æ®ï¼Œæˆ‘ä»¬ä»ç„¶ä½¿ç”¨ akshareã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ akshare è·å–è¿‡å»ä¸€å¹´çš„æ²ªæ·± 300 çš„è¡Œæƒ…æ•°æ®ï¼š

```python
import akshare as ak

hs300 = ak.stock_zh_index_daily(symbol="sz399300")
hs300.index = pd.to_datetime(hs300["date"])
print(hs300)
```

æˆ‘ä»¬å¯¹è¿‡å»ä¸€å¹´çš„æ²ªæ·± 300 çš„æ”¶ç›Šæƒ…å†µè¿›è¡Œé€Ÿè§ˆï¼š

```python
now = arrow.now()
year_ago = now.shift(years = -1)

year_ago = hs300[hs300.index >= np.datetime64(year_ago)].index[0]
# PRINT(YEAR_AGO)

# è®¡ç®—ä¹°å…¥å¹¶æŒæœ‰çš„æ”¶ç›Šï¼ˆæœ€è¿‘ä¸€å¹´ï¼‰
buy_price = hs300[hs300.index == year_ago].iloc[0]["close"]
buy_and_hold = hs300["close"][-1]/buy_price - 1
print(f"ä¹°å…¥å¹¶æŒæ”¶ç›Šï¼š{buy_and_hold:.2%}")

# é€šè¿‡å‡å€¼æ¨ç®—å¹´åŒ–æ”¶ç›Š
market_returns = hs300["close"].pct_change().dropna()
market_annual = (1 + market_returns[market_returns.index >= year_ago].mean()) ** 242 - 1
print(f"å¹´åŒ–æ”¶ç›Šï¼š{market_annual:.2%}")
```

å¯ä»¥çœ‹å‡ºï¼Œè¿‡å»ä¸€å¹´é‡Œï¼Œä»¥ä¹°å…¥å¹¶æŒæœ‰æ³•è®¡ï¼Œæ²ªæ·±300çš„æ”¶ç›Šæ˜¯-4.22%ï¼›å¦‚æœæŒ‰æ¯æ—¥æ”¶ç›Šå–å‡å€¼ï¼Œå†å¹´åŒ–ï¼Œåˆ™å¾—åˆ°æ”¶ç›Šæ˜¯-3.31%ï¼Œä¸¤è€…ç›¸å·®ä¸å¤§ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è·å–æ²ªæ·± 300 æˆä»½è‚¡ï¼Œä»¥ä¾¿ä»ä¸­æŠ½å–ä¸ªè‚¡è¿›è¡Œæ£€éªŒï¼š

```python
import akshare as ak
index_stock_cons_df = ak.index_stock_cons(symbol="399300")
print(index_stock_cons_df)
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éšæœºå– 10 æ”¯è‚¡ç¥¨ï¼Œè·å–è¡Œæƒ…ï¼Œå¹¶è®¡ç®—æ¯æ—¥æ”¶ç›Šç‡ï¼š

```python
np.random.seed(78)

stocks = random.sample(index_stock_cons_df['å“ç§ä»£ç '].to_list(), 10)

frames = {}

now = arrow.now()
start = now.shift(years = -1)
end = now.format("YYYYMMDD")
start = start.format("YYYYMMDD")

# è·å– 10 æ”¯è‚¡ç¥¨çš„è¡Œæƒ…æ•°æ®
for code in stocks:
    bars = ak.stock_zh_a_hist(symbol=code, period="daily", start_date=start, end_date=end, adjust="qfq")
    bars.index = pd.to_datetime(bars["æ—¥æœŸ"])
    frames[code] = bars["æ”¶ç›˜"]
    
# ä¸æŒ‡æ•°è¡Œæƒ…æ•°æ®åˆå¹¶
start = np.datetime64(now.shift(years = -1))
frames["399300"] = hs300[hs300.index >= start]["close"]

df = pd.DataFrame(frames)

# è®¡ç®—æ¯æ—¥æ”¶ç›Š
returns = df.pct_change()

# å¦‚æœå­˜åœ¨ NANï¼Œåˆ™åé¢çš„å›å½’æ³•å°†æ— æ³•èšåˆ
returns.dropna(how='any', inplace=True)
returns.style.format('{:,.2%}')
```

### è®¡ç®—ğ›½

æˆ‘ä»¬å°†é€šè¿‡ä¸¤ç§æ–¹å¼æ¥è®¡ç®—ğ›½ã€‚ä¸€ç§æ˜¯å›å½’æ³•ï¼Œä¸€ç§æ˜¯åæ–¹å·®æ³•ã€‚

#### å›å½’æ³•
åœ¨ numpy ä¸­æœ‰ä¸€ä¸ª polyfit å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œå¤šé¡¹å¼æ‹Ÿåˆã€‚å½“æˆ‘ä»¬ä½¿ç”¨ä¸€æ¬¡é¡¹æ‹Ÿåˆï¼Œé‚£ä¹ˆå¾—åˆ°çš„ç³»æ•°å°±æ˜¯è¦æ±‚çš„ğ›½ã€‚

```python
cols = df.columns
betas = {}
for name in cols:
    beta, alpha = np.polyfit(returns[name], returns["399300"], deg=1)
    print(name, f"{beta:.2%} {alpha:.2%}")
    betas[name] = beta
```

ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸€æ”¯è‚¡ç¥¨å­˜åœ¨æ­£çš„ alphaï¼ŒåŒæ—¶è¿˜å­˜åœ¨ 10%ä»¥ä¸Šçš„ beta æ”¶ç›Šã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹ï¼Œå¦‚æœä¹°å…¥è¿™æ”¯è‚¡ç¥¨ï¼Œå®ƒä»¬çš„é¢„æœŸæ”¶ç›Šåº”è¯¥æ˜¯å¤šå°‘ï¼š

è¿™é‡Œè¦æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ risk_free æ˜¯å¹´åŒ–æ”¶ç›Šï¼Œå› æ­¤æˆ‘ä»¬æœ€ç»ˆè®¡ç®—å‡ºæ¥çš„é¢„æœŸæ”¶ç›Šï¼Œä¹Ÿåº”è¯¥æ˜¯å¹´åŒ–ï¼ˆæˆ–è€…éƒ½ç»Ÿä¸€åˆ°æ—¥åŒ–ï¼‰ï¼š

```python
code = "002756"
beta = betas[code]

# å›å½’æ³•å¾—åˆ°çš„é¢„æœŸæ”¶ç›Š
expected_return = rf + beta * (market_annual - rf)
print(f"code beta: {beta:.2f}, Er: {expected_return:.2%}")
```

æœ€ç»ˆæˆ‘ä»¬å¾—åˆ° 002756 çš„ beta æ˜¯ 0.11ï¼Œä¸€å¹´æœŸçš„é¢„æœŸæ”¶ç›Šæ˜¯ 1.51%å·¦å³ã€‚

#### åæ–¹å·®æ³•

```python
params = {}

for name in cols:
    cov = np.cov(returns["399300"], returns[name])
    beta = cov[0,1]/cov[1,1]
    
    expected_return = rf + beta * (market_annual - rf)
    print(f"{name} beta: {beta:.2%}, Er: {expected_return:.2%}")
    params[name] = beta
    
beta = params[code]

# å›å½’æ³•å¾—åˆ°çš„é¢„æœŸæ”¶ç›Š
expected_return = rf + beta * (market_annual - rf)
print(f"code beta: {beta:.2f}, Er: {expected_return:.2%}")
```
è¿™æ ·å¾—åˆ° 002756 çš„ beta æ˜¯0.11ï¼Œå¹´åŒ–é¢„æœŸæ”¶ç›Šæ˜¯1.51%ã€‚

## å¯è§†åŒ–

æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼ï¼Œå°†ä¸ªè‚¡ä¸æ²ªæ·±300çš„æ¶¨è·Œç›¸å…³æ€§è¿›è¡Œå¯è§†åŒ–ï¼Œä»è€Œå¾—åˆ°æ›´ç›´è§‚çš„å°è±¡ã€‚

```python
import plotly.graph_objects as go
from plotly.subplots import make_subplots


ci = sorted(set(returns[code].index).intersection(set(returns["399300"].index)))

y = returns[code][ci]
x = returns["399300"][ci]

df = pd.DataFrame({
    "æ²ªæ·±300": sorted(returns["399300"][ci]),
    "æ ‡çš„": sorted(returns[code][ci])
})

fig = make_subplots(
    rows=1,
    cols=2
)

fig.add_trace(go.Scatter(x=df["æ²ªæ·±300"], y=df["æ ‡çš„"]))
fig2 = px.line(df)
fig.add_trace(fig2["data"][0], row=1, col=2)
fig.add_trace(fig2["data"][1], row=1, col=2)

fig['layout']['xaxis']['title']='æ²ªæ·±300'
fig['layout']['yaxis']['title']='æ ‡çš„'

fig.show()
```

æœ€ç»ˆæˆ‘ä»¬å¾—åˆ°ä¸‹å›¾ï¼š


![](https://images.jieyu.ai/images/2023/10/capm-q-plot.png)
