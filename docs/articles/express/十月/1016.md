---
title: 【10月16日】 一道概率题
date: 2025-10-16
excerpt: |
    您正在玩一个不公平的硬币抛掷游戏，其中 P（正面）= 0.70，P（反面）= 0.30。当出现相同数量的反面和正面时，游戏结束（即 TH、THTH、TTTHHH、HTHTHHTT 都是游戏结束的例子）。假设第一次抛硬币是反面，那么预计需要抛多少次才能结束游戏？
---

问题： 您正在玩一个不公平的硬币抛掷游戏，其中 P（正面）= 0.70，P（反面）= 0.30。当出现相同数量的反面和正面时，游戏结束（即 TH、THTH、TTTHHH、HTHTHHTT 都是游戏结束的例子）。假设第一次抛硬币是反面，那么预计需要抛多少次才能结束游戏？


这个问题本质是「带初始状态的马尔可夫过程期望计算」，核心是通过定义「状态」和「状态转移方程」，把复杂的无限次抛掷问题转化为可解的线性方程组。不过，要这么解就复杂了。实际上， 量化基金在招人时，也倾向于你通过直觉给出最简单的答案 （见 Jane Street 的官方面试指南，在我们昨天圈子的发文中有下载链接）。

那么，这个问题最简单的解法是什么呢？ 

通过递归法求解期望。

在题中，『需要抛多少次长能结束游戏』是一个随机变量，我们可以计为 X。X 也是抛出的结果序列的长度。游戏结束可能会有TH、THTH、TTTHHH、HTHTHHTT等多种可能，对应的 X 就是2, 4, 6, 8。

最终我们要求的是 X 的期望，而这个期望又可以通过递归来求解。

在第一次抛出的硬盘为反面的情况下，如果下一次抛出正面，那么游戏结束；如果下一次抛出反面，则需要正面多于反面两次才能结束游戏。所以，这期望的递归公式为：

$$
E(X) = 0.7 * 1 + 0.3 * ( 2 * E(X) + 1)
$$


这样求得的$E(X)$为2.5。

对公式解释如下，如果下一次抛出正面，那么游戏结束，队列长度（X）为1，概率为0.7，对期望的贡献为0.7 * 1; 另一种情况的概率为0.3，出现该情况时，我们进入到已经有一个负面，需要一个正面的重复场景，显然它的期望也是 $E(X)$。由于我们此时总共需要两个正面，所以要对$E(X)$乘以2；最后，我们还需要加上1，是因为在此情况下，我们已抛过一次硬币了。

如果你正在准备量化面试，需要有更多的概率/IQ练习题，推荐你看看 https://openquant.co/questions。
我们也会持续介绍和分析这方面的题目和资源，欢迎加入我们的社区。

如果是偏实战技能，则推荐学习《量化二十四课》和《因子分析与机器学习策略》。
